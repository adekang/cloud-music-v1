{"version":3,"sources":["api/config.js","application/Player/store/constants.js","application/Player/store/actionCreators.js","style.js","assets/iconfont/iconfont.js","application/Home/style.js","application/Player/miniPlayer/style.ts","baseUI/progress-circle.tsx","application/Player/miniPlayer/index.tsx","application/Player/normalPlayer/style.ts","baseUI/progressBar/index.tsx","application/Player/normalPlayer/index.tsx","baseUI/Toast/index.tsx","application/Player/play-list/style.ts","baseUI/confirm/index.tsx","application/Player/play-list/index.tsx","api/lyric-parser.js","application/Player/index.tsx","application/Home/index.tsx","routes/index.js","application/Recommend/store/reducer.js","application/Singers/store/reducer.js","application/Album/store/reducer.js","application/Singer/store/reducer.js","application/Player/store/reducer.js","application/Search/store/reducer.js","store/reducer.js","store/index.js","App.tsx","reportWebVitals.ts","index.tsx","application/Search/store/constants.js","assets/global-style.js","application/Singers/store/constants.js","application/Recommend/store/constants.js","application/Singer/store/constants.js","application/Album/store/constants.js","baseUI/loading-v2/index.tsx","baseUI/scroll/index.tsx","baseUI/loading/index.tsx","application/Recommend/store/actionCreators.js","application/Singers/store/actionCreators.js","application/Album/store/actionCreators.js","application/Singer/store/actionCreators.js","application/Search/store/actionCreators.js","api/utils.js","application/Rank/store/index.js","api/request.js"],"names":["axiosInstance","axios","create","baseURL","interceptors","response","use","res","data","err","console","log","categoryTypes","name","key","alphaTypes","categoryMap","Map","type","area","HEADER_HEIGHT","playMode","sequence","loop","random","SET_CURRENT_SONG","SET_FULL_SCREEN","SET_PLAYING_STATE","SET_SEQUENCE_PLAYLIST","SET_PLAYLIST","SET_PLAY_MODE","SET_CURRENT_INDEX","SET_SHOW_PLAYLIST","DELETE_SONG","INSERT_SONG","changeCurrentSong","fromJS","changeFullScreen","changePlayingState","changeSequencePlayList","changePlayList","changePlayMode","changeCurrentIndex","changeShowPlayList","deleteSong","getSongDetail","id","dispatch","getSongDetailRequest","then","song","songs","insertSong","GlobalStyle","createGlobalStyle","IconStyle","Top","styled","div","style","Tab","TabItem","rotate","keyframes","MiniPlayerContainer","noWrap","CircleWrapper","ProgressCircle","props","radius","percent","dashArray","Math","PI","dashOffset","width","height","viewBox","version","xmlns","className","r","cx","cy","fill","strokeDasharray","strokeDashoffset","children","React","memo","MiniPlayer","fullScreen","playing","toggleFullScreen","clickPlaying","togglePlayList","miniPlayerRef","useRef","CSSTransition","in","timeout","classNames","onEnter","current","display","onExited","ref","onClick","src","al","picUrl","alt","getName","ar","e","stopPropagation","NormalPlayerContainer","Middle","CDWrapper","Bottom","ProgressWrapper","Operators","LyricContainer","LyricWrapper","ProgressBarWrapper","ProgressBar","percentChange","transform","prefixStyle","progressBar","progress","progressBtn","useState","touch","setTouch","useEffect","initiated","barWidth","clientWidth","offsetWidth","_offset","_changePercent","curPercent","rect","getBoundingClientRect","pageX","left","onTouchStart","startTouch","startX","undefined","touches","onTouchMove","deltaX","min","max","onTouchEnd","endTouch","JSON","parse","stringify","NormalPlayer","mode","currentTime","duration","changeMode","handlePrev","handleNext","onProgressChange","toggleFullScreenDispatch","currentLineNum","currentPlayingLyric","currentLyric","currentState","setCurrentState","normalPlayerRef","cdWrapperRef","_getPosAndScale","window","innerWidth","scale","x","y","innerHeight","lyricScrollRef","lyricLineRefs","bScroll","getBScroll","lineEl","scrollToElement","scrollTo","mountOnEnter","animation","animations","registerAnimation","presets","easing","runAnimation","onEntered","cdWrapperDom","unregisterAnimation","onExit","transition","visibility","lines","map","item","index","createRef","txt","formatPlayTime","dangerouslySetInnerHTML","__html","ToastWrapper","Toast","forwardRef","show","setShow","timer","setTimer","text","useImperativeHandle","clearTimeout","setTimeout","unmountOnExit","PlayListWrapper","ScrollWrapper","ListHeader","extendClick","ListContent","confirmFadeIn","confirmZoom","ConfirmWrapper","Confirm","cancelBtnText","confirmBtnText","handleConfirm","appear","PlayList","canTouch","setCanTouch","startY","setStartY","initialed","setInitialed","distance","setDistance","currentIndex","immutableCurrentSong","currentSong","showPlayList","immutablePlayList","playList","immutableSequencePlayList","sequencePlayList","togglePlayListDispatch","changeCurrentIndexDispatch","changePlayListDispatch","changeModeDispatch","deleteSongDispatch","clearDispatch","toJS","listContentRef","confirmRef","playListRef","listWrapperRef","isShow","setIsShow","onEnterCB","useCallback","onEnteringCB","onExitingCB","onExitedCB","getCurrentIcon","content","newMode","findIndex","newList","shuffle","onEntering","onExiting","nativeEvent","pageY","getPlayMode","onScroll","pos","state","handleScroll","bounceTop","handleChangeCurrentIndex","handleDeleteSong","connect","getIn","timeExp","tagRegMap","title","artist","album","offset","by","noop","Lyric","lrc","hanlder","speed","this","tags","handler","curLineIndex","_init","_initTag","_initLines","tag","matches","match","RegExp","split","i","length","line","result","exec","replace","trim","push","time","sort","a","b","lineNum","delay","isSeek","Date","startStamp","preTime","_callHandler","_playRest","_findcurLineIndex","stop","play","Player","togglePlayingDispatch","changeCurrentDispatch","setCurrentTime","setDuration","isNaN","audioRef","preSong","setPreSong","modeText","setModeText","toastRef","songReady","getSongUrl","getLyric","dt","setPlayingLyric","handleLyric","lyric","getLyricRequest","seek","catch","togglePlay","pause","handleLoop","isEmptyObject","newTime","onEnded","onTimeUpdate","target","onError","alert","Home","route","history","to","activeClassName","renderRoutes","routes","RecommendComponent","lazy","SingersComponent","RankComponent","AlbumComponent","SingerComponent","SearchComponent","SuspenseComponent","Component","fallback","path","component","exact","render","defaultState","enterLoading","bannerList","recommendList","singerList","pullUpLoading","pullDownLoading","pageCount","currentAlbum","songsOfArtist","loading","get","sequenceList","fpIndex","splice","fsIndex","merge","handleInsertSong","sequenceIndex","hotList","suggestList","songsList","combineReducers","recommend","action","actionTypes","set","singers","rank","rankReducer","singerInfo","player","search","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducer","applyMiddleware","thunk","App","document","body","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","getElementById","SET_HOT_KEYWRODS","SET_SUGGEST_LIST","SET_RESULT_SONGS_LIST","SET_ENTER_LOADING","CHANGE_SINGER_LIST","CHANGE_PAGE_COUNT","CHANGE_ENTER_LOADING","CHANGE_PULLUP_LOADING","CHANGE_PULLDOWN_LOADING","CHANGE_BANNER","CHANGE_RECOMMEND_LIST","CHANGE_ARTIST","CHANGE_SONGS_OF_ARTIST","CHANGE_CURRENT_ALBUM","dance","Loading","LoadingV2","ScrollContainer","PullUpLoading","PullDownLoading","Scroll","setBScroll","scrollContainerRef","direction","click","refresh","pullUp","pullDown","bounceBottom","pullUpDebounce","useMemo","debounce","pullDownDebounce","scroll","BScroll","scrollX","scrollY","probeType","bounce","top","bottom","on","off","handlePullUp","maxScrollY","handlePullDown","PullUpdisplayStyle","PullDowndisplayStyle","LoadingWrapper","getBannerList","getBannerRequest","changeBannerList","banners","getRecommendList","getRecommendListRequest","changeRecommendList","changeEnterLoading","changeSingerList","changePageCount","changePullUpLoading","changePullDownLoading","getHotSingerList","getHotSingerListRequest","artists","refreshMoreHotSingerList","getState","getSingerList","category","alpha","getSingerListRequest","refreshMoreSingerList","getAlbumList","getAlbumDetailRequest","playlist","changeCurrentAlbum","getSingerInfo","getSingerInfoRequest","changeArtist","changeSongs","hotSongs","getHotKeyWords","getHotKeyWordsRequest","list","hots","changeHotKeyWords","getSuggestList","query","getSuggestListRequest","changeSuggestList","getResultSongsListRequest","changeResultSongs","getCount","count","floor","func","args","apply","filterIndex","rankList","tracks","str","obj","Object","keys","elementStyle","createElement","vendor","transformNames","webkit","Moz","O","ms","standard","charAt","toUpperCase","substr","interval","minute","second","toString","padStart","arr","new_arr","forEach","j","t","CHANGE_RANK_LIST","CHANGE_LOADING","getRankList","getRankListRequest","changeRankList","changeLoading","toLowerCase"],"mappings":"iHAAA,wNAQMA,EARN,OAQsBC,EAAMC,OAAO,CACjCC,QANqB,sCASvBH,EAAcI,aAAaC,SAASC,KAClC,SAAAC,GAAG,OAAIA,EAAIC,QACX,SAAAC,GACEC,QAAQC,IAAIF,EAAK,+BASd,IAAMG,EAAgB,CAC3B,CACEC,KAAM,qBACNC,IAAK,QAEP,CACED,KAAM,qBACNC,IAAK,QAEP,CACED,KAAM,2BACNC,IAAK,QAEP,CACED,KAAM,qBACNC,IAAK,QAEP,CACED,KAAM,qBACNC,IAAK,QAEP,CACED,KAAM,2BACNC,IAAK,QAEP,CACED,KAAM,qBACNC,IAAK,QAEP,CACED,KAAM,qBACNC,IAAK,QAEP,CACED,KAAM,2BACNC,IAAK,QAEP,CACED,KAAM,qBACNC,IAAK,QAEP,CACED,KAAM,qBACNC,IAAK,QAEP,CACED,KAAM,2BACNC,IAAK,QAEP,CACED,KAAM,iCACNC,IAAK,QAEP,CACED,KAAM,iCACNC,IAAK,QAEP,CACED,KAAM,2BACNC,IAAK,SAKIC,EAAa,CACxB,CACED,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,IACLD,KAAM,KAER,CACEC,IAAK,I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","file":"static/js/main.a84268d7.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\n// 开发环境\r\nexport const baseUrl = 'https://music-api-five.vercel.app'\r\n// 测试环境\r\n// export const baseUrl = 'http://121.41.42.16:3000'\r\n\r\n//axios 的实例及拦截器配置\r\nconst axiosInstance = axios.create({\r\n  baseURL: baseUrl\r\n})\r\n\r\naxiosInstance.interceptors.response.use(\r\n  res => res.data,\r\n  err => {\r\n    console.log(err, '网络错误')\r\n  }\r\n)\r\n\r\nexport {\r\n  axiosInstance\r\n}\r\n\r\n// 歌手种类\r\nexport const categoryTypes = [\r\n  {\r\n    name: '华语男',\r\n    key: '1001'\r\n  },\r\n  {\r\n    name: '华语女',\r\n    key: '1002'\r\n  },\r\n  {\r\n    name: '华语组合',\r\n    key: '1003'\r\n  },\r\n  {\r\n    name: '欧美男',\r\n    key: '2001'\r\n  },\r\n  {\r\n    name: '欧美女',\r\n    key: '2002'\r\n  },\r\n  {\r\n    name: '欧美组合',\r\n    key: '2003'\r\n  },\r\n  {\r\n    name: '日本男',\r\n    key: '6001'\r\n  },\r\n  {\r\n    name: '日本女',\r\n    key: '6002'\r\n  },\r\n  {\r\n    name: '日本组合',\r\n    key: '6003'\r\n  },\r\n  {\r\n    name: '韩国男',\r\n    key: '7001'\r\n  },\r\n  {\r\n    name: '韩国女',\r\n    key: '7002'\r\n  },\r\n  {\r\n    name: '韩国组合',\r\n    key: '7003'\r\n  },\r\n  {\r\n    name: '其他男歌手',\r\n    key: '4001'\r\n  },\r\n  {\r\n    name: '其他女歌手',\r\n    key: '4002'\r\n  },\r\n  {\r\n    name: '其他组合',\r\n    key: '4003'\r\n  },\r\n]\r\n\r\n// 歌手首字母\r\nexport const alphaTypes = [\r\n  {\r\n    key: 'A',\r\n    name: 'A'\r\n  },\r\n  {\r\n    key: 'B',\r\n    name: 'B'\r\n  },\r\n  {\r\n    key: 'C',\r\n    name: 'C'\r\n  },\r\n  {\r\n    key: 'D',\r\n    name: 'D'\r\n  },\r\n  {\r\n    key: 'E',\r\n    name: 'E'\r\n  },\r\n  {\r\n    key: 'F',\r\n    name: 'F'\r\n  },\r\n  {\r\n    key: 'G',\r\n    name: 'G'\r\n  },\r\n  {\r\n    key: 'H',\r\n    name: 'H'\r\n  },\r\n  {\r\n    key: 'I',\r\n    name: 'I'\r\n  },\r\n  {\r\n    key: 'J',\r\n    name: 'J'\r\n  },\r\n  {\r\n    key: 'K',\r\n    name: 'K'\r\n  },\r\n  {\r\n    key: 'L',\r\n    name: 'L'\r\n  },\r\n  {\r\n    key: 'M',\r\n    name: 'M'\r\n  },\r\n  {\r\n    key: 'N',\r\n    name: 'N'\r\n  },\r\n  {\r\n    key: 'O',\r\n    name: 'O'\r\n  },\r\n  {\r\n    key: 'P',\r\n    name: 'P'\r\n  },\r\n  {\r\n    key: 'Q',\r\n    name: 'Q'\r\n  },\r\n  {\r\n    key: 'R',\r\n    name: 'R'\r\n  },\r\n  {\r\n    key: 'S',\r\n    name: 'S'\r\n  },\r\n  {\r\n    key: 'T',\r\n    name: 'T'\r\n  },\r\n  {\r\n    key: 'U',\r\n    name: 'U'\r\n  },\r\n  {\r\n    key: 'V',\r\n    name: 'V'\r\n  },\r\n  {\r\n    key: 'W',\r\n    name: 'W'\r\n  },\r\n  {\r\n    key: 'X',\r\n    name: 'X'\r\n  },\r\n  {\r\n    key: 'Y',\r\n    name: 'Y'\r\n  },\r\n  {\r\n    key: 'Z',\r\n    name: 'Z'\r\n  }\r\n]\r\n\r\n\r\nexport const categoryMap = new Map([\r\n  ['1001', {type: 1, area: 7}],\r\n  ['1002', {type: 2, area: 7}],\r\n  ['1003', {type: 3, area: 7}],\r\n  ['2001', {type: 1, area: 96}],\r\n  ['2002', {type: 2, area: 96}],\r\n  ['2003', {type: 3, area: 96}],\r\n  ['6001', {type: 1, area: 8}],\r\n  ['6002', {type: 2, area: 8}],\r\n  ['6003', {type: 3, area: 8}],\r\n  ['7001', {type: 1, area: 16}],\r\n  ['7002', {type: 2, area: 16}],\r\n  ['7003', {type: 3, area: 16}],\r\n  ['4001', {type: 1, area: 0}],\r\n  ['4002', {type: 2, area: 0}],\r\n  ['4003', {type: 3, area: 0}],\r\n])\r\n\r\n//顶部的高度\r\nexport const HEADER_HEIGHT = 45\r\n\r\n// 播放模式\r\nexport const playMode = {\r\n  sequence: 0,\r\n  loop: 1,\r\n  random: 2\r\n}\r\n\r\n","//store/constants.js\r\nexport const SET_CURRENT_SONG = 'player/SET_CURRENT_SONG'\r\nexport const SET_FULL_SCREEN = 'player/SET_FULL_SCREEN'\r\nexport const SET_PLAYING_STATE = 'player/SET_PLAYING_STATE'\r\nexport const SET_SEQUENCE_PLAYLIST = 'player/SET_SEQUENCE_PLAYLIST'\r\nexport const SET_PLAYLIST = 'player/SET_PLAYLIST'\r\nexport const SET_PLAY_MODE = 'player/SET_PLAY_MODE'\r\nexport const SET_CURRENT_INDEX = 'player/SET_CURRENT_INDEX'\r\nexport const SET_SHOW_PLAYLIST = 'player/SET_SHOW_PLAYLIST'\r\nexport const DELETE_SONG = 'player/DELETE_SONG'\r\nexport const INSERT_SONG = 'player/INSERT_SONG'","//store/actionCreators.js\r\nimport {\r\n  SET_CURRENT_SONG,\r\n  SET_FULL_SCREEN,\r\n  SET_PLAYING_STATE,\r\n  SET_SEQUENCE_PLAYLIST,\r\n  SET_PLAYLIST,\r\n  SET_PLAY_MODE,\r\n  SET_CURRENT_INDEX,\r\n  SET_SHOW_PLAYLIST,\r\n  DELETE_SONG,\r\n  INSERT_SONG\r\n} from './constants'\r\nimport {fromJS} from 'immutable'\r\nimport {getSongDetailRequest} from '../../../api/request'\r\n\r\nexport const changeCurrentSong = (data) => ({\r\n  type: SET_CURRENT_SONG,\r\n  data: fromJS(data)\r\n})\r\n\r\nexport const changeFullScreen = (data) => ({\r\n  type: SET_FULL_SCREEN,\r\n  data\r\n})\r\n\r\nexport const changePlayingState = (data) => ({\r\n  type: SET_PLAYING_STATE,\r\n  data\r\n})\r\n\r\nexport const changeSequencePlayList = (data) => ({\r\n  type: SET_SEQUENCE_PLAYLIST,\r\n  data: fromJS(data)\r\n})\r\n\r\nexport const changePlayList = (data) => ({\r\n  type: SET_PLAYLIST,\r\n  data: fromJS(data)\r\n})\r\n\r\nexport const changePlayMode = (data) => ({\r\n  type: SET_PLAY_MODE,\r\n  data\r\n})\r\n\r\nexport const changeCurrentIndex = (data) => ({\r\n  type: SET_CURRENT_INDEX,\r\n  data\r\n})\r\n\r\nexport const changeShowPlayList = (data) => ({\r\n  type: SET_SHOW_PLAYLIST,\r\n  data\r\n})\r\n\r\nexport const deleteSong = (data) => ({\r\n  type: DELETE_SONG,\r\n  data\r\n})\r\n\r\nexport const insertSong = (data) => ({\r\n  type: INSERT_SONG,\r\n  data\r\n})\r\n\r\nexport const getSongDetail = (id) => {\r\n  return (dispatch) => {\r\n    getSongDetailRequest(id).then(data => {\r\n      let song = data.songs[0]\r\n      dispatch(insertSong(song))\r\n    })\r\n  }\r\n}\r\n","import { createGlobalStyle } from \"styled-components\"\r\n\r\nexport const GlobalStyle = createGlobalStyle`\r\n\thtml, body, div, span, applet, object, iframe,\r\n\th1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\n\ta, abbr, acronym, address, big, cite, code,\r\n\tdel, dfn, em, img, ins, kbd, q, s, samp,\r\n\tsmall, strike, strong, sub, sup, tt, var,\r\n\tb, u, i, center,\r\n\tdl, dt, dd, ol, ul, li,\r\n\tfieldset, form, label, legend,\r\n\ttable, caption, tbody, tfoot, thead, tr, th, td,\r\n\tarticle, aside, canvas, details, embed, \r\n\tfigure, figcaption, footer, header, hgroup, \r\n\tmenu, nav, output, ruby, section, summary,\r\n\ttime, mark, audio, video {\r\n\t\tmargin: 0;\r\n\t\tpadding: 0;\r\n\t\tborder: 0;\r\n\t\tfont-size: 100%;\r\n\t\tfont: inherit;\r\n\t\tvertical-align: baseline;\r\n\t}\r\n\t/* HTML5 display-role reset for older browsers */\r\n\tarticle, aside, details, figcaption, figure, \r\n\tfooter, header, hgroup, menu, nav, section {\r\n\t\tdisplay: block;\r\n\t}\r\n\tbody {\r\n\t\tline-height: 1;\r\n\t}\r\n\thtml, body {\r\n\t\tbackground: #f2f3f4;;\r\n\t}\r\n\tol, ul {\r\n\t\tlist-style: none;\r\n\t}\r\n\tblockquote, q {\r\n\t\tquotes: none;\r\n\t}\r\n\tblockquote:before, blockquote:after,\r\n\tq:before, q:after {\r\n\t\tcontent: '';\r\n\t\tcontent: none;\r\n\t}\r\n\ttable {\r\n\t\tborder-collapse: collapse;\r\n\t\tborder-spacing: 0;\r\n\t}\r\n\ta {\r\n\t\ttext-decoration: none;\r\n\t\tcolor: #fff;\r\n\t}\r\n`\r\n","import {createGlobalStyle} from 'styled-components';\n\nexport const IconStyle = createGlobalStyle`\n@font-face {font-family: \"iconfont\";\n  src: url('iconfont.eot?t=1565320061289'); /* IE9 */\n  src: url('iconfont.eot?t=1565320061289#iefix') format('embedded-opentype'), /* IE6-IE8 */\n  url('data:application/x-font-woff2;charset=utf-8;base64,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') format('woff2'),\n  url('iconfont.woff?t=1565320061289') format('woff'),\n  url('iconfont.ttf?t=1565320061289') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+ */\n  url('iconfont.svg?t=1565320061289#iconfont') format('svg'); /* iOS 4.1- */\n}\n\n.iconfont {\n  font-family: \"iconfont\" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n`\n","import styled from \"styled-components\"\r\nimport style from \"../../assets/global-style\"\r\n\r\nexport const Top = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: space-between;\r\n\tpadding: 5px 10px;\r\n\tbackground: ${style[\"theme-color\"]};\r\n\t& > span {\r\n\t\tline-height: 40px;\r\n\t\tcolor: #f1f1f1;\r\n\t\tfont-size: 20px;\r\n\t\t&.iconfont {\r\n\t\t\tfont-size: 25px;\r\n\t\t}\r\n\t}\r\n`\r\nexport const Tab = styled.div`\r\n\theight: 44px;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: space-around;\r\n\tbackground: ${style[\"theme-color\"]};\r\n\ta {\r\n\t\tflex: 1;\r\n\t\tpadding: 2px 0;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #e4e4e4;\r\n\t\t&.selected {\r\n\t\t\tspan {\r\n\t\t\t\tpadding: 3px 0;\r\n\t\t\t\tfont-weight: 700;\r\n\t\t\t\tcolor: #f1f1f1;\r\n\t\t\t\tborder-bottom: 2px solid #f1f1f1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\nexport const TabItem = styled.div`\r\n\theight: 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`\r\n","import styled, {keyframes} from 'styled-components';\r\nimport style from '../../../assets/global-style';\r\n\r\nconst rotate = keyframes`\r\n  0% {\r\n    transform: rotate(0);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n`;\r\n\r\nexport const MiniPlayerContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n  width: 100%;\r\n  height: 60px;\r\n  background: ${style['highlight-background-color']};\r\n\r\n  &.mini-enter {\r\n    transform: translate3d(0, 100%, 0);\r\n  }\r\n\r\n  &.mini-enter-active {\r\n    transform: translate3d(0, 0, 0);\r\n    transition: all 0.4s;\r\n  }\r\n\r\n  &.mini-exit-active {\r\n    transform: translate3d(0, 100%, 0);\r\n    transition: all .4s\r\n  }\r\n\r\n  .icon {\r\n    flex: 0 0 40px;\r\n    width: 40px;\r\n    height: 40px;\r\n    padding: 0 10px 0 20px;\r\n\r\n    .imgWrapper {\r\n      width: 100%;\r\n      height: 100%;\r\n\r\n      img {\r\n        border-radius: 50%;\r\n\r\n        &.play {\r\n          animation: ${rotate} 10s infinite;\r\n\r\n          &.pause {\r\n            animation-play-state: paused;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .text {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    flex: 1;\r\n    line-height: 20px;\r\n    overflow: hidden;\r\n\r\n    .name {\r\n      margin-bottom: 2px;\r\n      font-size: ${style['font-size-m']};\r\n      color: ${style['font-color-desc']};\r\n      ${style.noWrap()}\r\n    }\r\n\r\n    .desc {\r\n      font-size: ${style['font-size-s']};\r\n      color: ${style['font-color-desc-v2']};\r\n      ${style.noWrap()}\r\n    }\r\n  }\r\n\r\n  .control {\r\n    flex: 0 0 30px;\r\n    padding: 0 10px;\r\n\r\n    .iconfont, .icon-playlist {\r\n      font-size: 30px;\r\n      color: ${style['theme-color']};\r\n    }\r\n\r\n    .icon-mini {\r\n      font-size: 16px;\r\n      position: absolute;\r\n      left: 8px;\r\n      top: 8px;\r\n\r\n      &.icon-play {\r\n        left: 9px\r\n      }\r\n    }\r\n  }\r\n`;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport style from '../assets/global-style';\r\n\r\nconst CircleWrapper = styled.div`\r\n  position: relative;\r\n\r\n  circle {\r\n    stroke-width: 8px;\r\n    transform-origin: center;\r\n\r\n    &.progress-background {\r\n      transform: scale(0.9);\r\n      stroke: ${style['theme-color-shadow']};\r\n    }\r\n\r\n    &.progress-bar {\r\n      transform: scale(0.9) rotate(-90deg);\r\n      stroke: ${style['theme-color']};\r\n    }\r\n  }\r\n`;\r\n\r\nfunction ProgressCircle(props: any) {\r\n  const {radius, percent} = props;\r\n  // 整个背景的周长\r\n  const dashArray = Math.PI * 100;\r\n  // 没有高亮的部分，剩下高亮的就是进度\r\n  const dashOffset = (1 - percent) * dashArray;\r\n\r\n  return (\r\n    <CircleWrapper>\r\n      <svg width={radius} height={radius} viewBox=\"0 0 100 100\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle className=\"progress-background\" r=\"50\" cx=\"50\" cy=\"50\" fill=\"transparent\"/>\r\n        <circle className=\"progress-bar\" r=\"50\" cx=\"50\" cy=\"50\" fill=\"transparent\"\r\n                strokeDasharray={dashArray}\r\n                strokeDashoffset={dashOffset}/>\r\n      </svg>\r\n      {props.children}\r\n    </CircleWrapper>\r\n  );\r\n}\r\n\r\nexport default React.memo(ProgressCircle);","import React, {useRef} from 'react';\r\nimport {getName} from '../../../api/utils';\r\nimport {MiniPlayerContainer} from './style';\r\nimport {CSSTransition} from 'react-transition-group';\r\nimport ProgressCircle from '../../../baseUI/progress-circle';\r\n\r\nfunction MiniPlayer(props: any) {\r\n  const {song, fullScreen, playing, percent} = props;\r\n  const {toggleFullScreen, clickPlaying, togglePlayList} = props;\r\n\r\n  const handleTogglePlayList = (e: any) => {\r\n    togglePlayList(true);\r\n    e.stopPropagation();\r\n  };\r\n  const miniPlayerRef = useRef<any>();\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={!fullScreen}\r\n      timeout={400}\r\n      classNames=\"mini\"\r\n      onEnter={() => {\r\n        miniPlayerRef.current.style.display = 'flex';\r\n      }}\r\n      onExited={() => {\r\n        miniPlayerRef.current.style.display = 'none';\r\n      }}\r\n    >\r\n\r\n      <MiniPlayerContainer ref={miniPlayerRef} onClick={() => toggleFullScreen(true)}>\r\n        <div className=\"icon\">\r\n          <div className=\"imgWrapper\">\r\n            <img className={`play ${playing ? '' : 'pause'}`} src={song.al.picUrl} width=\"40\" height=\"40\" alt=\"img\"/>\r\n          </div>\r\n        </div>\r\n        <div className=\"text\">\r\n          <h2 className=\"name\">{song.name}</h2>\r\n          <p className=\"desc\">{getName(song.ar)}</p>\r\n        </div>\r\n        <div className=\"control\">\r\n          <ProgressCircle radius={32} percent={percent}>\r\n            {\r\n              playing ?\r\n                <i className=\"icon-mini iconfont icon-pause\" onClick={e => clickPlaying(e, false)}>&#xe650;</i>\r\n                :\r\n                <i className=\"icon-mini iconfont icon-play\" onClick={e => clickPlaying(e, true)}>&#xe61e;</i>\r\n            }\r\n          </ProgressCircle>\r\n        </div>\r\n        <div className=\"control\" onClick={handleTogglePlayList}>\r\n          <i className=\"iconfont\">&#xe640;</i>\r\n        </div>\r\n      </MiniPlayerContainer>\r\n    </CSSTransition>\r\n\r\n  );\r\n}\r\n\r\nexport default React.memo(MiniPlayer);","import styled, { keyframes } from 'styled-components'\nimport style from '../../../assets/global-style'\n\nconst rotate = keyframes`\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`\nexport const NormalPlayerContainer = styled.div`\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\tz-index: 150;\n\tbackground: ${style['background-color']};\n\n\t&.normal-enter,\n\t&.normal-exit-done {\n\t\t.top {\n\t\t\ttransform: translate3d(0, -100px, 0);\n\t\t}\n\n\t\t.bottom {\n\t\t\ttransform: translate3d(0, 100px, 0);\n\t\t}\n\t}\n\n\t&.normal-enter-active,\n\t&.normal-exit-active {\n\t\t.top,\n\t\t.bottom {\n\t\t\ttransform: translate3d(0, 0, 0);\n\t\t\ttransition: all 0.4s cubic-bezier(0.86, 0.18, 0.82, 1.32);\n\t\t}\n\n\t\topacity: 1;\n\t\ttransition: all 0.4s;\n\t}\n\n\t&.normal-exit-active {\n\t\topacity: 0;\n\t}\n\n\t.background {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tz-index: -1;\n\t\topacity: 0.6;\n\t\tfilter: blur(20px);\n\n\t\t&.layer {\n\t\t\tbackground: ${style['font-color-desc']};\n\t\t\topacity: 0.3;\n\t\t\tfilter: none;\n\t\t}\n\t}\n`\nexport const Top = styled.div`\n\tposition: relative;\n\tmargin-bottom: 25px;\n\n\t.back {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 6px;\n\t\tz-index: 50;\n\n\t\t.iconfont {\n\t\t\tdisplay: block;\n\t\t\tpadding: 9px;\n\t\t\tfont-size: 24px;\n\t\t\tcolor: ${style['font-color-desc']};\n\t\t\tfont-weight: bold;\n\t\t\ttransform: rotate(90deg);\n\t\t}\n\t}\n\n\t.title {\n\t\twidth: 70%;\n\t\tmargin: 0 auto;\n\t\tline-height: 40px;\n\t\ttext-align: center;\n\t\tfont-size: ${style['font-size-l']};\n\t\tcolor: ${style['font-color-desc']};\n\t\t${style.noWrap()};\n\t}\n\n\t.subtitle {\n\t\tline-height: 20px;\n\t\ttext-align: center;\n\t\tfont-size: ${style['font-size-m']};\n\t\tcolor: ${style['font-color-desc-v2']};\n\t\t${style.noWrap()};\n\t}\n`\nexport const Middle = styled.div`\n\tposition: fixed;\n\twidth: 100%;\n\ttop: 80px;\n\tbottom: 170px;\n\twhite-space: nowrap;\n\tfont-size: 0;\n\toverflow: hidden;\n\n\t.fade-enter {\n\t\topacity: 0;\n\t}\n\t.fade-enter-active {\n\t\topacity: 1;\n\t\ttransition: all 0.4s;\n\t}\n\t.fade-enter-done {\n\t\ttransition: none;\n\t}\n\t.fade-exit-active {\n\t\topacity: 0;\n\t}\n\t.fade-exit-done {\n\t\topacity: 0;\n\t}\n`\nexport const CDWrapper = styled.div`\n\tposition: absolute;\n\tmargin: auto;\n\ttop: 10%;\n\tleft: 0;\n\tright: 0;\n\twidth: 80%;\n\tbox-sizing: border-box;\n\theight: 80vw;\n\n\t.cd {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tborder-radius: 50%;\n\n\t\t.image {\n\t\t\tposition: absolute;\n\t\t\tleft: 0;\n\t\t\ttop: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tbox-sizing: border-box;\n\t\t\tborder-radius: 50%;\n\t\t\tborder: 10px solid rgba(255, 255, 255, 0.1);\n\t\t}\n\n\t\t.play {\n\t\t\tanimation: ${rotate} 20s linear infinite;\n\n\t\t\t&.pause {\n\t\t\t\tanimation-play-state: paused;\n\t\t\t}\n\t\t}\n\t}\n\n\t.playing_lyric {\n\t\tmargin-top: 20px;\n\t\tfont-size: 14px;\n\t\tline-height: 20px;\n\t\twhite-space: normal;\n\t\ttext-align: center;\n\t\tcolor: rgba(255, 255, 255, 0.5);\n\t}\n`\n\nexport const Bottom = styled.div`\n\tposition: absolute;\n\tbottom: 50px;\n\twidth: 100%;\n`\nexport const ProgressWrapper = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\twidth: 80%;\n\tmargin: 0px auto;\n\tpadding: 10px 0;\n\n\t.time {\n\t\tcolor: ${style['font-color-desc']};\n\t\tfont-size: ${style['font-size-s']};\n\t\tflex: 0 0 30px;\n\t\tline-height: 30px;\n\t\twidth: 30px;\n\n\t\t&.time-l {\n\t\t\ttext-align: left;\n\t\t}\n\n\t\t&.time-r {\n\t\t\ttext-align: right;\n\t\t}\n\t}\n\n\t.progress-bar-wrapper {\n\t\tflex: 1;\n\t}\n`\nexport const Operators = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\n\t.icon {\n\t\tfont-weight: 300;\n\t\tflex: 1;\n\t\tcolor: ${style['font-color-desc']};\n\n\t\t&.disable {\n\t\t\tcolor: ${style['theme-color-shadow']};\n\t\t}\n\n\t\ti {\n\t\t\tfont-weight: 300;\n\t\t\tfont-size: 30px;\n\t\t}\n\t}\n\n\t.i-left {\n\t\ttext-align: right;\n\t}\n\n\t.i-center {\n\t\tpadding: 0 20px;\n\t\ttext-align: center;\n\n\t\ti {\n\t\t\tfont-size: 40px;\n\t\t}\n\t}\n\n\t.i-right {\n\t\ttext-align: left;\n\t}\n\n\t.icon-favorite {\n\t\tcolor: ${style['theme-color']};\n\t}\n`\n\nexport const LyricContainer = styled.div`\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n`\nexport const LyricWrapper = styled.div`\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\ttext-align: center;\n\n\tp {\n\t\tline-height: 32px;\n\t\tcolor: rgba(255, 255, 255, 0.5);\n\t\twhite-space: normal;\n\t\tfont-size: ${style['font-size-l']};\n\n\t\t&.current {\n\t\t\tcolor: #fff;\n\t\t}\n\n\t\t&.pure {\n\t\t\tposition: relative;\n\t\t\ttop: 30vh;\n\t\t}\n\t}\n`\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport styled from 'styled-components';\r\nimport style from '../../assets/global-style';\r\nimport {prefixStyle} from './../../api/utils';\r\n\r\nconst ProgressBarWrapper = styled.div`\r\n  height: 30px;\r\n\r\n  .bar-inner {\r\n    position: relative;\r\n    top: 13px;\r\n    height: 4px;\r\n    background: rgba(0, 0, 0, .3);\r\n\r\n    .progress {\r\n      position: absolute;\r\n      height: 100%;\r\n      background: ${style['theme-color']};\r\n    }\r\n\r\n    .progress-btn-wrapper {\r\n      position: absolute;\r\n      left: -15px;\r\n      top: -13px;\r\n      width: 30px;\r\n      height: 30px;\r\n\r\n      .progress-btn {\r\n        position: relative;\r\n        top: 7px;\r\n        left: 7px;\r\n        box-sizing: border-box;\r\n        width: 16px;\r\n        height: 16px;\r\n        border: 3px solid ${style['border-color']};\r\n        border-radius: 50%;\r\n        background: ${style['theme-color']};\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nfunction ProgressBar(props: any) {\r\n  const {percent} = props;\r\n  const {percentChange} = props;\r\n  const transform = prefixStyle('transform');\r\n\r\n  const progressBar = useRef<any>();\r\n  const progress = useRef<any>();\r\n  const progressBtn = useRef<any>();\r\n  const [touch, setTouch] = useState<any>({});\r\n\r\n  const progressBtnWidth = 8;\r\n\r\n  useEffect(() => {\r\n    if (percent >= 0 && percent <= 1 && !touch.initiated) {\r\n      const barWidth = progressBar.current.clientWidth - progressBtnWidth;\r\n      const offsetWidth = percent * barWidth;\r\n      progress.current.style.width = `${offsetWidth}px`;\r\n      progressBtn.current.style[transform] = `translate3d(${offsetWidth}px, 0, 0)`;\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [percent]);\r\n\r\n  // 处理进度条的偏移\r\n  const _offset = (offsetWidth: number) => {\r\n    progress.current.style.width = `${offsetWidth}px`;\r\n    progressBtn.current.style.transform = `translate3d(${offsetWidth}px, 0, 0)`;\r\n  };\r\n  const _changePercent = () => {\r\n    const barWidth = progressBar.current.clientWidth - progressBtnWidth;\r\n    const curPercent = progress.current.clientWidth / barWidth;\r\n    percentChange(curPercent);\r\n  };\r\n\r\n  const progressTouchStart = (e: any) => {\r\n    const startTouch = {\r\n      startX: undefined,\r\n      initiated: true,\r\n      left: undefined\r\n    };\r\n    startTouch.initiated = true;//initial 为 true 表示滑动动作开始了\r\n    startTouch.startX = e.touches[0].pageX;// 滑动开始时横向坐标\r\n    startTouch.left = progress.current.clientWidth;// 当前 progress 长度\r\n    // @ts-ignore\r\n    setTouch(startTouch);\r\n  };\r\n  const progressTouchMove = (e: any) => {\r\n    if (!touch.initiated) return;\r\n    // 滑动距离\r\n    const deltaX = e.touches[0].pageX - touch.startX;\r\n    const barWidth = progressBar.current.clientWidth - progressBtnWidth;\r\n    const offsetWidth = Math.min(Math.max(0, touch.left + deltaX), barWidth);\r\n    _offset(offsetWidth);\r\n    _changePercent();\r\n  };\r\n  const progressTouchEnd = (e: any) => {\r\n    const endTouch = JSON.parse(JSON.stringify(touch));\r\n    endTouch.initiated = false;\r\n    setTouch(endTouch);\r\n  };\r\n\r\n  const progressClick = (e: any) => {\r\n    const rect = progressBar.current.getBoundingClientRect();\r\n    const offsetWidth = e.pageX - rect.left;\r\n    _offset(offsetWidth);\r\n    _changePercent();\r\n  };\r\n\r\n  return (\r\n    <ProgressBarWrapper>\r\n      <div className=\"bar-inner\" ref={progressBar} onClick={progressClick}>\r\n        <div className=\"progress\" ref={progress}/>\r\n        <div className=\"progress-btn-wrapper\" ref={progressBtn}\r\n             onTouchStart={progressTouchStart}\r\n             onTouchMove={progressTouchMove}\r\n             onTouchEnd={progressTouchEnd}\r\n        >\r\n          <div className=\"progress-btn\"/>\r\n        </div>\r\n      </div>\r\n    </ProgressBarWrapper>\r\n  );\r\n}\r\n\r\nexport default ProgressBar;","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { getName, prefixStyle, formatPlayTime } from \"../../../api/utils\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport animations from \"create-keyframe-animation\";\r\nimport {\r\n  NormalPlayerContainer,\r\n  Top,\r\n  Middle,\r\n  Bottom,\r\n  Operators,\r\n  CDWrapper,\r\n  ProgressWrapper,\r\n  LyricContainer,\r\n  LyricWrapper,\r\n} from \"./style\";\r\nimport ProgressBar from \"../../../baseUI/progressBar\";\r\nimport { playMode } from \"../../../api/config\";\r\nimport Scroll from \"../../../baseUI/scroll\";\r\n\r\nfunction NormalPlayer(props: any) {\r\n  const { fullScreen, song, mode, playing, percent, currentTime, duration } =\r\n    props;\r\n  const {\r\n    changeMode,\r\n    handlePrev,\r\n    handleNext,\r\n    onProgressChange,\r\n    clickPlaying,\r\n    toggleFullScreen,\r\n  } = props;\r\n  const { toggleFullScreenDispatch, togglePlayList } = props;\r\n  const { currentLineNum, currentPlayingLyric, currentLyric } = props;\r\n\r\n  const [currentState, setCurrentState] = useState<\"\" | \"lyric\">(\"\");\r\n\r\n  const normalPlayerRef = useRef<any>();\r\n  const cdWrapperRef = useRef<any>();\r\n  const transform = prefixStyle(\"transform\");\r\n\r\n  // 计算偏移的辅助函数\r\n  const _getPosAndScale = () => {\r\n    const targetWidth = 40;\r\n    const paddingLeft = 40;\r\n    const paddingBottom = 30;\r\n    const paddingTop = 80;\r\n    const width = window.innerWidth * 0.8;\r\n    const scale = targetWidth / width;\r\n    // 两个圆心的横坐标距离和纵坐标距离\r\n    const x = -(window.innerWidth / 2 - paddingLeft);\r\n    const y = window.innerHeight - paddingTop - width / 2 - paddingBottom;\r\n    return {\r\n      x,\r\n      y,\r\n      scale,\r\n    };\r\n  };\r\n  // 启用帧动画\r\n  const enter = () => {\r\n    normalPlayerRef.current.style.display = \"block\";\r\n    const { x, y, scale } = _getPosAndScale(); // 获取 miniPlayer 图片中心相对 normalPlayer 唱片中心的偏移\r\n    const animation = {\r\n      0: {\r\n        transform: `translate3d(${x}px,${y}px,0) scale(${scale})`,\r\n      },\r\n      60: {\r\n        transform: `translate3d(0, 0, 0) scale(1.1)`,\r\n      },\r\n      100: {\r\n        transform: `translate3d(0, 0, 0) scale(1)`,\r\n      },\r\n    };\r\n    animations.registerAnimation({\r\n      name: \"move\",\r\n      animation,\r\n      presets: {\r\n        duration: 400,\r\n        easing: \"linear\",\r\n      },\r\n    });\r\n    animations.runAnimation(cdWrapperRef.current, \"move\");\r\n  };\r\n  const afterEnter = () => {\r\n    // 进入后解绑帧动画\r\n    const cdWrapperDom = cdWrapperRef.current;\r\n    animations.unregisterAnimation(\"move\");\r\n    cdWrapperDom.style.animation = \"\";\r\n  };\r\n  const leave = () => {\r\n    if (!cdWrapperRef.current) return;\r\n    const cdWrapperDom = cdWrapperRef.current;\r\n    cdWrapperDom.style.transition = \"all 0.4s\";\r\n    const { x, y, scale } = _getPosAndScale();\r\n    cdWrapperDom.style[\r\n      transform\r\n    ] = `translate3d(${x}px, ${y}px, 0) scale(${scale})`;\r\n  };\r\n  const afterLeave = () => {\r\n    if (!cdWrapperRef.current) return;\r\n    const cdWrapperDom = cdWrapperRef.current;\r\n    cdWrapperDom.style.transition = \"\";\r\n    cdWrapperDom.style[transform] = \"\";\r\n    // 一定要注意现在要把 normalPlayer 这个 DOM 给隐藏掉，因为 CSSTransition 的工作只是把动画执行一遍\r\n    // 不置为 none 现在全屏播放器页面还是存在\r\n    normalPlayerRef.current.style.display = \"none\";\r\n    setCurrentState(\"\");\r\n  };\r\n\r\n  const goBack = () => {\r\n    toggleFullScreen(false);\r\n  };\r\n\r\n  const getPlayMode = () => {\r\n    let content;\r\n    if (mode === playMode.sequence) {\r\n      content = \"&#xe625;\";\r\n    } else if (mode === playMode.loop) {\r\n      content = \"&#xe653;\";\r\n    } else {\r\n      content = \"&#xe61b;\";\r\n    }\r\n    return content;\r\n  };\r\n\r\n  const lyricScrollRef = useRef<any>();\r\n  const lyricLineRefs = useRef<any>([]);\r\n\r\n  const toggleCurrentState = () => {\r\n    let nextState: \"\" | \"lyric\" = \"\";\r\n    if (currentState !== \"lyric\") {\r\n      nextState = \"lyric\";\r\n    } else {\r\n      nextState = \"\";\r\n    }\r\n    setCurrentState(nextState);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!lyricScrollRef.current) return;\r\n    let bScroll = lyricScrollRef.current.getBScroll();\r\n    if (currentLineNum > 5) {\r\n      // 保持当前歌词在第 5 条的位置\r\n      let lineEl = lyricLineRefs.current[currentLineNum - 5].current;\r\n      bScroll.scrollToElement(lineEl, 1000);\r\n    } else {\r\n      // 当前歌词行数 <=5, 直接滚动到最顶端\r\n      bScroll.scrollTo(0, 0, 1000);\r\n    }\r\n  }, [currentLineNum]);\r\n\r\n  return (\r\n    <CSSTransition\r\n      classNames=\"normal\"\r\n      in={fullScreen}\r\n      timeout={400}\r\n      mountOnEnter\r\n      onEnter={enter}\r\n      onEntered={afterEnter}\r\n      onExit={leave}\r\n      onExited={afterLeave}\r\n    >\r\n      <NormalPlayerContainer ref={normalPlayerRef}>\r\n        <div className=\"background\">\r\n          <img\r\n            src={song.al.picUrl + \"?param=300x300\"}\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            alt=\"歌曲图片\"\r\n          />\r\n        </div>\r\n        <div className=\"background layer\" />\r\n        <Top className=\"top\">\r\n          <div className=\"back\" onClick={goBack}>\r\n            <i className=\"iconfont icon-back\">&#xe662;</i>\r\n          </div>\r\n          <h1 className=\"title\">{song.name}</h1>\r\n          <h1 className=\"subtitle\">{getName(song.ar)}</h1>\r\n        </Top>\r\n        <Middle ref={cdWrapperRef} onClick={toggleCurrentState}>\r\n          <CSSTransition\r\n            timeout={400}\r\n            classNames=\"fade\"\r\n            in={currentState !== \"lyric\"}\r\n          >\r\n            <CDWrapper\r\n              style={{\r\n                visibility: currentState !== \"lyric\" ? \"visible\" : \"hidden\",\r\n              }}\r\n              // playing={playing}\r\n            >\r\n              <div className={`needle ${playing ? \"\" : \"pause\"}`} />\r\n              <div className=\"cd\">\r\n                <img\r\n                  className={`image play ${playing ? \"\" : \"pause\"}`}\r\n                  src={song.al.picUrl + \"?param=400x400\"}\r\n                  alt=\"\"\r\n                />\r\n              </div>\r\n              {/* <CD playing={playing} image={song.al.picUrl + \"?param=300x300\"}></CD> */}\r\n              <p className=\"playing_lyric\">{currentPlayingLyric}</p>\r\n            </CDWrapper>\r\n          </CSSTransition>\r\n          <CSSTransition\r\n            timeout={400}\r\n            classNames=\"fade\"\r\n            in={currentState === \"lyric\"}\r\n          >\r\n            <LyricContainer>\r\n              <Scroll ref={lyricScrollRef}>\r\n                <LyricWrapper\r\n                  style={{\r\n                    visibility: currentState === \"lyric\" ? \"visible\" : \"hidden\",\r\n                  }}\r\n                  className=\"lyric_wrapper\"\r\n                >\r\n                  {currentLyric ? (\r\n                    currentLyric.lines.map((item: any, index: any) => {\r\n                      lyricLineRefs.current[index] = React.createRef();\r\n                      return (\r\n                        <p\r\n                          className={`text ${\r\n                            currentLineNum === index ? \"current\" : \"\"\r\n                          }`}\r\n                          key={item + index}\r\n                          ref={lyricLineRefs.current[index]}\r\n                        >\r\n                          {item.txt}\r\n                        </p>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <p className=\"text pure\">纯音乐，请欣赏。</p>\r\n                  )}\r\n                </LyricWrapper>\r\n              </Scroll>\r\n            </LyricContainer>\r\n          </CSSTransition>\r\n        </Middle>\r\n        <Bottom className=\"bottom\">\r\n          <ProgressWrapper>\r\n            <span className=\"time time-l\">{formatPlayTime(currentTime)}</span>\r\n            <div className=\"progress-bar-wrapper\">\r\n              <ProgressBar percent={percent} percentChange={onProgressChange} />\r\n            </div>\r\n            <div className=\"time time-r\">{formatPlayTime(duration)}</div>\r\n          </ProgressWrapper>\r\n          <Operators>\r\n            <div className=\"icon i-left\" onClick={changeMode}>\r\n              <i\r\n                className=\"iconfont\"\r\n                dangerouslySetInnerHTML={{ __html: getPlayMode() }}\r\n              />\r\n            </div>\r\n            <div className=\"icon i-left\" onClick={handlePrev}>\r\n              <i className=\"iconfont\">&#xe6e1;</i>\r\n            </div>\r\n            <div className=\"icon i-center\">\r\n              <i\r\n                className=\"iconfont\"\r\n                onClick={(e) => clickPlaying(e, !playing)}\r\n                dangerouslySetInnerHTML={{\r\n                  __html: playing ? \"&#xe723;\" : \"&#xe731;\",\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"icon i-right\" onClick={handleNext}>\r\n              <i className=\"iconfont\">&#xe718;</i>\r\n            </div>\r\n            <div\r\n              className=\"icon i-right\"\r\n              onClick={() => {\r\n                togglePlayList(true);\r\n              }}\r\n            >\r\n              <i className=\"iconfont\">&#xe640;</i>\r\n            </div>\r\n          </Operators>\r\n        </Bottom>\r\n      </NormalPlayerContainer>\r\n    </CSSTransition>\r\n  );\r\n}\r\n\r\nexport default React.memo(NormalPlayer);\r\n","//Toast/index.js\r\nimport React, {useState, useImperativeHandle, forwardRef} from 'react';\r\nimport styled from 'styled-components';\r\nimport {CSSTransition} from 'react-transition-group';\r\nimport style from '../../assets/global-style';\r\n\r\nconst ToastWrapper = styled.div`\r\n  position: fixed;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n  width: 100%;\r\n  height: 50px;\r\n    /* background: ${style['highlight-background-color']}; */\r\n\r\n  &.drop-enter {\r\n    opacity: 0;\r\n    transform: translate3d(0, 100%, 0);\r\n  }\r\n\r\n  &.drop-enter-active {\r\n    opacity: 1;\r\n    transition: all 0.3s;\r\n    transform: translate3d(0, 0, 0);\r\n  }\r\n\r\n  &.drop-exit-active {\r\n    opacity: 0;\r\n    transition: all 0.3s;\r\n    transform: translate3d(0, 100%, 0);\r\n  }\r\n\r\n  .text {\r\n    line-height: 50px;\r\n    text-align: center;\r\n    color: #fff;\r\n    font-size: ${style['font-size-l']};\r\n  }\r\n`;\r\n//外面组件需要拿到这个函数组件的ref，因此用forwardRef\r\nconst Toast = forwardRef((props: any, ref) => {\r\n  const [show, setShow] = useState(false);\r\n  const [timer, setTimer] = useState<any>('');\r\n  const {text} = props;\r\n  //外面组件拿函数组件ref的方法，用useImperativeHandle这个hook\r\n  useImperativeHandle(ref, () => ({\r\n    show() {\r\n      // 做了防抖处理\r\n      if (timer) clearTimeout(timer);\r\n      setShow(true);\r\n      setTimer(setTimeout(() => {\r\n        setShow(false);\r\n      }, 3000));\r\n    }\r\n  }));\r\n  return (\r\n    <CSSTransition in={show} timeout={300} classNames=\"drop\" unmountOnExit>\r\n      <ToastWrapper>\r\n        <div className=\"text\">{text}</div>\r\n      </ToastWrapper>\r\n    </CSSTransition>\r\n  );\r\n});\r\n\r\nexport default React.memo(Toast);","import styled from 'styled-components';\r\nimport style from '../../../assets/global-style';\r\n\r\nexport const PlayListWrapper = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n  background-color: ${style['background-color-shadow']};\r\n\r\n  &.list-fade-enter {\r\n    opacity: 0;\r\n  }\r\n\r\n  &.list-fade-enter-active {\r\n    opacity: 1;\r\n    transition: all 0.3s;\r\n  }\r\n\r\n  &.list-fade-exit {\r\n    opacity: 1;\r\n  }\r\n\r\n  &.list-fade-exit-active {\r\n    opacity: 0;\r\n    transition: all 0.3s;\r\n  }\r\n\r\n  .list_wrapper {\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    opacity: 1;\r\n    border-radius: 10px 10px 0 0;\r\n    background-color: ${style['highlight-background-color']};\r\n    transform: translate3d(0, 0, 0);\r\n\r\n    .list_close {\r\n      text-align: center;\r\n      line-height: 50px;\r\n      background: ${style['background-color']};\r\n      font-size: ${style['font-size-l']};\r\n      color: ${style['font-color-desc']};\r\n    }\r\n  }\r\n`;\r\nexport const ScrollWrapper = styled.div`\r\n  height: 400px;\r\n  overflow: hidden;\r\n`;\r\n\r\nexport const ListHeader = styled.div`\r\n  position: relative;\r\n  padding: 20px 30px 10px 20px;\r\n\r\n  .title {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    > div {\r\n      flex: 1;\r\n\r\n      .text {\r\n        flex: 1;\r\n        font-size: ${style['font-size-m']};\r\n        color: ${style['font-color-desc']};\r\n      }\r\n    }\r\n\r\n    .iconfont {\r\n      margin-right: 10px;\r\n      font-size: ${style['font-size-ll']};\r\n      color: ${style['theme-color']};\r\n    }\r\n\r\n    .clear {\r\n      ${style.extendClick()}\r\n      font-size: ${style['font-size-l']};\r\n    }\r\n  }\r\n`;\r\nexport const ListContent = styled.div`\r\n  .item {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 40px;\r\n    padding: 0 30px 0 20px;\r\n    overflow: hidden;\r\n\r\n    .current {\r\n      flex: 0 0 20px;\r\n      width: 20px;\r\n      font-size: ${style['font-size-s']};\r\n      color: ${style['theme-color']};\r\n    }\r\n\r\n    .text {\r\n      flex: 1;\r\n      ${style.noWrap()}\r\n      font-size: ${style['font-size-m']};\r\n      color: ${style['font-color-desc-v2']};\r\n\r\n      .icon-favorite {\r\n        color: ${style['theme-color']};\r\n      }\r\n    }\r\n\r\n    .like {\r\n      ${style.extendClick()}\r\n      margin-right: 15px;\r\n      font-size: ${style['font-size-m']};\r\n      color: ${style['theme-color']};\r\n    }\r\n\r\n    .delete {\r\n      ${style.extendClick()}\r\n      font-size: ${style['font-size-s']};\r\n      color: ${style['theme-color']};\r\n    }\r\n  }\r\n`;","import React, {forwardRef, useImperativeHandle, useState} from 'react';\r\nimport {CSSTransition} from 'react-transition-group';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\n\r\nconst confirmFadeIn = keyframes`\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n`;\r\nconst confirmZoom = keyframes`\r\n  0% {\r\n    transform: scale(0);\r\n  }\r\n  50% {\r\n    transform: scale(1.1);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n`;\r\n\r\nconst ConfirmWrapper = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n  background: ${style['background-color-shadow']};\r\n\r\n  &.confirm-fade-enter-active {\r\n    animation: ${confirmFadeIn} 0.3s;\r\n\r\n    .confirm_content {\r\n      animation: ${confirmZoom} 0.3s\r\n    }\r\n  }\r\n\r\n  > div {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate3d(-50%, -50%, 0);\r\n    z-index: 100;\r\n\r\n    .confirm_content {\r\n      width: 270px;\r\n      border-radius: 13px;\r\n      background: ${style['highlight-background-color']};\r\n\r\n      .text {\r\n        padding: 19px 15px;\r\n        line-height: 22px;\r\n        text-align: center;\r\n        font-size: ${style['font-size-l']};\r\n        color: ${style['font-color-desc-v2']};\r\n      }\r\n\r\n      .operate {\r\n        display: flex;\r\n        align-items: center;\r\n        text-align: center;\r\n        font-size: ${style['font-size-l']};\r\n\r\n        .operate_btn {\r\n          flex: 1;\r\n          line-height: 22px;\r\n          padding: 10px 0;\r\n          border-top: 1px solid ${style['border-color']};\r\n          color: ${style['font-color-desc']};\r\n\r\n          &.left {\r\n            border-right: 1px solid ${style['border-color']};\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst Confirm = forwardRef((props: any, ref) => {\r\n  const [show, setShow] = useState(false);\r\n  const {text, cancelBtnText, confirmBtnText} = props;\r\n\r\n  const {handleConfirm} = props;\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    show() {\r\n      setShow(true);\r\n    }\r\n  }));\r\n  // style={{display: show ? \"block\": \"none\"}}\r\n  return (\r\n    <CSSTransition classNames=\"confirm-fade\" timeout={300} appear={true} in={show}>\r\n      <ConfirmWrapper style={{display: show ? 'block' : 'none'}} onClick={e => e.stopPropagation()}>\r\n        <div>\r\n          <div className=\"confirm_content\">\r\n            <p className=\"text\">{text}</p>\r\n            <div className=\"operate\">\r\n              <div className=\"operate_btn left\" onClick={() => setShow(false)}>{cancelBtnText}</div>\r\n              <div className=\"operate_btn\" onClick={() => {\r\n                setShow(false);\r\n                handleConfirm();\r\n              }}>{confirmBtnText}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ConfirmWrapper>\r\n    </CSSTransition>\r\n  );\r\n});\r\n\r\nexport default React.memo(Confirm);","import {connect} from 'react-redux';\r\nimport {PlayListWrapper, ScrollWrapper, ListHeader, ListContent} from './style';\r\nimport {CSSTransition} from 'react-transition-group';\r\nimport React, {useRef, useState, useCallback} from 'react';\r\nimport {prefixStyle, getName, shuffle, findIndex} from '../../../api/utils';\r\nimport {\r\n  changeShowPlayList,\r\n  changeCurrentIndex,\r\n  changePlayMode,\r\n  changePlayList,\r\n  deleteSong,\r\n  changeSequencePlayList,\r\n  changeCurrentSong,\r\n  changePlayingState\r\n} from '../store/actionCreators';\r\nimport {playMode} from '../../../api/config';\r\nimport Scroll from '../../../baseUI/scroll';\r\nimport Confirm from './../../../baseUI/confirm/index';\r\n\r\n//组件内代码\r\nfunction PlayList(props: any) {\r\n  const [canTouch, setCanTouch] = useState(true);\r\n  // touchStart后记录y值\r\n  const [startY, setStartY] = useState(0);\r\n  // touchStart事件是否已经被触发\r\n  const [initialed, setInitialed] = useState<boolean>(false);\r\n  // 用户下滑的距离\r\n  const [distance, setDistance] = useState(0);\r\n\r\n  const {\r\n    currentIndex,\r\n    currentSong: immutableCurrentSong,\r\n    showPlayList,\r\n    playList: immutablePlayList,\r\n    mode,\r\n    sequencePlayList: immutableSequencePlayList\r\n  } = props;\r\n  const {\r\n    togglePlayListDispatch,\r\n    changeCurrentIndexDispatch,\r\n    changePlayListDispatch,\r\n    changeModeDispatch,\r\n    deleteSongDispatch,\r\n    clearDispatch\r\n  } = props;\r\n\r\n  const currentSong = immutableCurrentSong.toJS();\r\n  const playList = immutablePlayList.toJS();\r\n  const sequencePlayList = immutableSequencePlayList.toJS();\r\n\r\n  const listContentRef = useRef<any>();\r\n  const confirmRef = useRef<any>();\r\n  const playListRef = useRef<any>();\r\n  const listWrapperRef = useRef<any>();\r\n  const [isShow, setIsShow] = useState(false);\r\n  const transform = prefixStyle('transform');\r\n\r\n\r\n  // 动画\r\n  const onEnterCB = useCallback(() => {\r\n    //让列表显示\r\n    setIsShow(true);\r\n    //最开始是隐藏在下面\r\n    listWrapperRef.current.style[transform] = `translate3d(0, 100%, 0)`;\r\n  }, [transform]);\r\n  const onEnteringCB = useCallback(() => {\r\n    //让列表展现\r\n    listWrapperRef.current.style['transition'] = 'all 0.3s';\r\n    listWrapperRef.current.style[transform] = `translate3d(0, 0, 0)`;\r\n  }, [transform]);\r\n  const onExitingCB = useCallback(() => {\r\n    listWrapperRef.current.style['transition'] = 'all 0.3s';\r\n    listWrapperRef.current.style[transform] = `translate3d(0px, 100%, 0px)`;\r\n  }, [transform]);\r\n  const onExitedCB = useCallback(() => {\r\n    setIsShow(false);\r\n    listWrapperRef.current.style[transform] = `translate3d(0px, 100%, 0px)`;\r\n  }, [transform]);\r\n\r\n  const getCurrentIcon = (item: any) => {\r\n    //是不是当前正在播放的歌曲\r\n    const current = currentSong.id === item.id;\r\n    const className = current ? 'icon-play' : '';\r\n    const content = current ? '&#xe6e3;' : '';\r\n    return (\r\n      <i className={`current iconfont ${className}`} dangerouslySetInnerHTML={{__html: content}}/>\r\n    );\r\n  };\r\n\r\n  const getPlayMode = () => {\r\n    let content, text;\r\n    if (mode === playMode.sequence) {\r\n      content = '&#xe625;';\r\n      text = '顺序播放';\r\n    } else if (mode === playMode.loop) {\r\n      content = '&#xe653;';\r\n      text = '单曲循环';\r\n    } else {\r\n      content = '&#xe61b;';\r\n      text = '随机播放';\r\n    }\r\n    return (\r\n      <div>\r\n        <i className=\"iconfont\" onClick={(e) => changeMode(e)} dangerouslySetInnerHTML={{__html: content}}/>\r\n        <span className=\"text\" onClick={(e) => changeMode(e)}>{text}</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const changeMode = (e: any) => {\r\n    let newMode = (mode + 1) % 3;\r\n    if (newMode === 0) {\r\n      //顺序模式\r\n      changePlayListDispatch(sequencePlayList);\r\n      let index = findIndex(currentSong, sequencePlayList);\r\n      changeCurrentIndexDispatch(index);\r\n    } else if (newMode === 1) {\r\n      //单曲循环\r\n      changePlayListDispatch(sequencePlayList);\r\n    } else if (newMode === 2) {\r\n      //随机播放\r\n      let newList = shuffle(sequencePlayList);\r\n      let index = findIndex(currentSong, newList);\r\n      changePlayListDispatch(newList);\r\n      changeCurrentIndexDispatch(index);\r\n    }\r\n    changeModeDispatch(newMode);\r\n  };\r\n\r\n  const handleChangeCurrentIndex = (index: number) => {\r\n    if (currentIndex === index) return;\r\n    changeCurrentIndexDispatch(index);\r\n  };\r\n\r\n  const handleDeleteSong = (e: React.MouseEvent<HTMLSpanElement, MouseEvent>, song: any) => {\r\n    e.stopPropagation();\r\n    deleteSongDispatch(song);\r\n  };\r\n\r\n  const handleShowClear = () => {\r\n    confirmRef.current.show();\r\n  };\r\n\r\n  const handleConfirmClear = () => {\r\n    clearDispatch();\r\n  };\r\n\r\n  const handleScroll = (pos: { y: number; }) => {\r\n    //只有当内容偏移量为0的时候才能下滑关闭PlayList。否则一边内容在移动，一边列表在移动，出现bug\r\n    let state = pos.y === 0;\r\n    setCanTouch(state);\r\n  };\r\n  // 下滑关闭及反弹效果\r\n  const handleTouchStart = (e: any) => {\r\n    if (!canTouch || initialed) return;\r\n    listWrapperRef.current.style['transition'] = '';\r\n    setStartY(e.nativeEvent.touches[0].pageY);//记录y值\r\n    setInitialed(true);\r\n  };\r\n\r\n  const handleTouchMove = (e: any) => {\r\n    if (!canTouch || !initialed) return;\r\n    let distance = e.nativeEvent.touches[0].pageY - startY;\r\n    if (distance < 0) return;\r\n    setDistance(distance);//记录下滑距离\r\n    listWrapperRef.current.style.transform = `translate3d(0, ${distance}px, 0)`;\r\n  };\r\n\r\n  const handleTouchEnd = () => {\r\n    setInitialed(false);\r\n    //这里设置阈值为150px\r\n    if (distance >= 150) {\r\n      //大于150px则关闭PlayList\r\n      togglePlayListDispatch(false);\r\n    } else {\r\n      //否则反弹回去\r\n      listWrapperRef.current.style['transition'] = 'all 0.3s';\r\n      listWrapperRef.current.style[transform] = `translate3d(0px, 0px, 0px)`;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={showPlayList}\r\n      timeout={300}\r\n      classNames=\"list-fade\"\r\n      onEnter={onEnterCB}\r\n      onEntering={onEnteringCB}\r\n      onExiting={onExitingCB}\r\n      onExited={onExitedCB}\r\n    >\r\n      <PlayListWrapper\r\n        ref={playListRef}\r\n        style={isShow ? {display: 'block'} : {display: 'none'}}\r\n        onClick={() => togglePlayListDispatch(false)}\r\n      >\r\n        <div\r\n          className=\"list_wrapper\"\r\n          ref={listWrapperRef}\r\n          onClick={e => e.stopPropagation()}\r\n          onTouchStart={handleTouchStart}\r\n          onTouchMove={handleTouchMove}\r\n          onTouchEnd={handleTouchEnd}\r\n        >\r\n          <ListHeader>\r\n            <h1 className=\"title\">\r\n              {getPlayMode()}\r\n              <span className=\"iconfont clear\" onClick={handleShowClear}>&#xe63d;</span>\r\n            </h1>\r\n          </ListHeader>\r\n          <ScrollWrapper>\r\n            <Scroll\r\n              ref={listContentRef}\r\n              onScroll={pos => handleScroll(pos)}\r\n              bounceTop={false}\r\n            >\r\n              <ListContent>\r\n                {\r\n                  playList.map((item: any, index: number) => {\r\n                    return (\r\n                      <li className=\"item\" key={item.id} onClick={() => handleChangeCurrentIndex(index)}>\r\n                        {getCurrentIcon(item)}\r\n                        <span className=\"text\">{item.name} - {getName(item.ar)}</span>\r\n                        <span className=\"like\">\r\n                          <i className=\"iconfont\">&#xe601;</i>\r\n                        </span>\r\n                        <span className=\"delete\" onClick={(e) => handleDeleteSong(e, item)}>\r\n                          <i className=\"iconfont\">&#xe63d;</i>\r\n                        </span>\r\n                      </li>\r\n                    );\r\n                  })\r\n                }\r\n              </ListContent>\r\n            </Scroll>\r\n          </ScrollWrapper>\r\n          <Confirm\r\n            ref={confirmRef}\r\n            text={'是否删除全部?'}\r\n            cancelBtnText={'取消'}\r\n            confirmBtnText={'确定'}\r\n            handleConfirm={handleConfirmClear}\r\n          />\r\n        </div>\r\n      </PlayListWrapper>\r\n    </CSSTransition>\r\n  );\r\n}\r\n\r\n// 映射Redux全局的state到组件的props上\r\nconst mapStateToProps = (state: any) => ({\r\n  currentIndex: state.getIn(['player', 'currentIndex']),\r\n  currentSong: state.getIn(['player', 'currentSong']),\r\n  playList: state.getIn(['player', 'playList']),//播放列表\r\n  sequencePlayList: state.getIn(['player', 'sequencePlayList']),//顺序排列时的播放列表\r\n  showPlayList: state.getIn(['player', 'showPlayList']),\r\n  mode: state.getIn(['player', 'mode'])\r\n});\r\n// 映射dispatch到props上\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    togglePlayListDispatch(data: any) {\r\n      dispatch(changeShowPlayList(data));\r\n    },\r\n    //修改当前歌曲在列表中的index，也就是切歌\r\n    changeCurrentIndexDispatch(data: any) {\r\n      dispatch(changeCurrentIndex(data));\r\n    },\r\n    //修改当前的播放模式\r\n    changeModeDispatch(data: any) {\r\n      dispatch(changePlayMode(data));\r\n    },\r\n    //修改当前的歌曲列表\r\n    changePlayListDispatch(data: any) {\r\n      dispatch(changePlayList(data));\r\n    },\r\n    deleteSongDispatch(data: any) {\r\n      dispatch(deleteSong(data));\r\n    },\r\n    clearDispatch() {\r\n      // 1.清空两个列表\r\n      dispatch(changePlayList([]));\r\n      dispatch(changeSequencePlayList([]));\r\n      // 2.初始currentIndex\r\n      dispatch(changeCurrentIndex(-1));\r\n      // 3.关闭PlayList的显示\r\n      dispatch(changeShowPlayList(false));\r\n      // 4.将当前歌曲置空\r\n      dispatch(changeCurrentSong({}));\r\n      // 5.重置播放状态\r\n      dispatch(changePlayingState(false));\r\n    }\r\n  };\r\n};\r\n// 将ui组件包装成容器组件\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(PlayList));","/**version:1.0.0\r\n * 传入歌词，按照正则表达式解析\r\n * 解析的数据结构为：\r\n * {\r\n *   txt:歌词，\r\n *   time:ms\r\n * }\r\n */\r\n// eslint-disable-next-line\r\nconst timeExp = /\\[(\\d{2,}):(\\d{2})(?:[\\.\\:](\\d{2,3}))?]/g\r\n\r\nconst STATE_PAUSE = 0\r\nconst STATE_PLAYING = 1\r\n\r\nconst tagRegMap = {\r\n  title: 'ti',\r\n  artist: 'ar',\r\n  album: 'al',\r\n  offset: 'offset',\r\n  by: 'by'\r\n}\r\n\r\nfunction noop() {\r\n}\r\n\r\nexport default class Lyric {\r\n  constructor(lrc, hanlder = noop, speed = 1) {\r\n    this.lrc = lrc\r\n    this.tags = {}\r\n    this.lines = []\r\n    this.handler = hanlder\r\n    this.state = STATE_PAUSE\r\n    this.curLineIndex = 0\r\n    this.speed = speed\r\n    this.offset = 0\r\n\r\n    this._init()\r\n  }\r\n\r\n  _init() {\r\n    this._initTag()\r\n\r\n    this._initLines()\r\n  }\r\n\r\n  _initTag() {\r\n    for (let tag in tagRegMap) {\r\n      const matches = this.lrc.match(new RegExp(`\\\\[${tagRegMap[tag]}:([^\\\\]]*)]`, 'i'))\r\n      this.tags[tag] = matches && (matches[1] || '')\r\n    }\r\n  }\r\n\r\n  _initLines() {\r\n    const lines = this.lrc.split('\\n')\r\n    for (let i = 0; i < lines.length; i++) {\r\n      const line = lines[i]\r\n      let result = timeExp.exec(line)\r\n      if (result) {\r\n        const txt = line.replace(timeExp, '').trim()\r\n        if (txt) {\r\n          if (result[3].length === 3) {\r\n            result[3] = result[3] / 10\r\n          }\r\n          this.lines.push({\r\n            time: result[1] * 60 * 1000 + result[2] * 1000 + (result[3] || 0) * 10,\r\n            txt\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    this.lines.sort((a, b) => {\r\n      return a.time - b.time\r\n    })\r\n\r\n  }\r\n\r\n  _findcurLineIndex(time) {\r\n    for (let i = 0; i < this.lines.length; i++) {\r\n      if (time <= this.lines[i].time) {\r\n        return i\r\n      }\r\n    }\r\n    return this.lines.length - 1\r\n  }\r\n\r\n  _callHandler(i) {\r\n    if (i < 0) {\r\n      return\r\n    }\r\n    this.handler({\r\n      txt: this.lines[i].txt,\r\n      lineNum: i\r\n    })\r\n  }\r\n\r\n  _playRest(isSeek = false) {\r\n    let line = this.lines[this.curLineIndex]\r\n    let delay\r\n    if (isSeek) {\r\n      delay = line.time - (+new Date() - this.startStamp)\r\n    } else {\r\n      //拿到上一行的歌词开始时间，算间隔\r\n      let preTime = this.lines[this.curLineIndex - 1] ? this.lines[this.curLineIndex - 1].time : 0\r\n      delay = line.time - preTime\r\n    }\r\n    this.timer = setTimeout(() => {\r\n      this._callHandler(this.curLineIndex++)\r\n      if (this.curLineIndex < this.lines.length && this.state === STATE_PLAYING) {\r\n        this._playRest()\r\n      }\r\n    }, (delay / this.speed))\r\n  }\r\n\r\n  changeSpeed(speed) {\r\n    this.speed = speed\r\n  }\r\n\r\n  play(offset = 0, isSeek = false) {\r\n    if (!this.lines.length) {\r\n      return\r\n    }\r\n    this.state = STATE_PLAYING\r\n\r\n    this.curLineIndex = this._findcurLineIndex(offset)\r\n    //现在正处于第this.curLineIndex-1行\r\n    this._callHandler(this.curLineIndex - 1)\r\n    this.offset = offset\r\n    this.startStamp = +new Date() - offset\r\n\r\n    if (this.curLineIndex < this.lines.length) {\r\n      clearTimeout(this.timer)\r\n      this._playRest(isSeek)\r\n    }\r\n  }\r\n\r\n  togglePlay(offset) {\r\n    if (this.state === STATE_PLAYING) {\r\n      this.stop()\r\n      this.offset = offset\r\n    } else {\r\n      this.state = STATE_PLAYING\r\n      this.play(offset, true)\r\n    }\r\n  }\r\n\r\n  stop() {\r\n    this.state = STATE_PAUSE\r\n    this.offset = 0\r\n    clearTimeout(this.timer)\r\n  }\r\n\r\n  seek(offset) {\r\n    this.play(offset, true)\r\n  }\r\n}","import React, {useRef, useState, useEffect} from 'react';\nimport {connect} from 'react-redux';\nimport {\n  changePlayingState,\n  changeShowPlayList,\n  changeCurrentIndex,\n  changeCurrentSong,\n  changePlayList,\n  changePlayMode,\n  changeFullScreen\n} from './store/actionCreators';\nimport MiniPlayer from './miniPlayer';\nimport NormalPlayer from './normalPlayer';\nimport {getLyricRequest, getSongUrl} from '../../api/request';\nimport {findIndex, isEmptyObject, shuffle} from '../../api/utils';\nimport Toast from '../../baseUI/Toast';\nimport {playMode} from '../../api/config';\nimport PlayList from './play-list';\nimport Lyric from '../../api/lyric-parser';\n\nfunction Player(props: any) {\n  const {\n    fullScreen,\n    playing,\n    currentIndex,\n    currentSong: immutableCurrentSong,\n    playList: immutablePlayList,\n    mode,\n    sequencePlayList: immutableSequencePlayList\n  } = props;\n  const {\n    toggleFullScreenDispatch,\n    togglePlayingDispatch,\n    togglePlayListDispatch,\n    changeCurrentIndexDispatch,\n    changeCurrentDispatch,\n    changeModeDispatch,//改变mode\n    changePlayListDispatch,//改变playList\n  } = props;\n\n  const playList = immutablePlayList.toJS();\n  const sequencePlayList = immutableSequencePlayList.toJS();\n  const currentSong = immutableCurrentSong.toJS();\n\n  //目前播放时间\n  const [currentTime, setCurrentTime] = useState(0);\n  //歌曲总时长\n  const [duration, setDuration] = useState(0);\n  //歌曲播放进度\n  let percent = isNaN(currentTime / duration) ? 0 : currentTime / duration;\n  const audioRef = useRef<any>();\n  //记录当前的歌曲，以便于下次重渲染时比对是否是一首歌\n  const [preSong, setPreSong] = useState<any>({});\n\n  const [modeText, setModeText] = useState('');\n  const toastRef = useRef<any>();\n\n  const songReady = useRef<any>(true);\n  const currentLyric = useRef<any>();\n\n  useEffect(() => {\n    if (\n      !playList.length ||\n      currentIndex === -1 ||\n      !playList[currentIndex] ||\n      playList[currentIndex].id === preSong.id ||\n      !songReady\n    )\n      return;\n    let current = playList[currentIndex];\n    setPreSong(current);\n    changeCurrentDispatch(current);//赋值currentSong\n    console.log('新歌曲：：', getSongUrl(current.id));\n    audioRef.current.src = getSongUrl(current.id as number);\n    setCurrentTime(0);//从头开始播放\n\n    setTimeout(() => {\n      // 注意，play 方法返回的是一个 promise 对象\n      audioRef.current.play().then(() => {\n        songReady.current = true;\n      });\n    });\n    togglePlayingDispatch(true);\n    getLyric(current.id);\n    setDuration((current.dt / 1000) | 0);//时长\n    // eslint-disable-next-line\n  }, [playList, currentIndex, playing]);\n\n  const [currentPlayingLyric, setPlayingLyric] = useState('');\n  const currentLineNum = useRef(0);\n\n  const handleLyric = ({lineNum, txt}: any) => {\n    if (!currentLyric.current) return;\n    currentLineNum.current = lineNum;\n    setPlayingLyric(txt);\n  };\n\n  const getLyric = (id: number) => {\n    let lyric = '';\n    if (currentLyric.current) {\n      currentLyric.current.stop();\n    }\n    // 避免 songReady 恒为 false 的情况\n    getLyricRequest(id)\n      .then((data: any) => {\n        lyric = data.lrc.lyric;\n        if (!lyric) {\n          currentLyric.current = null;\n          return;\n        }\n        // @ts-ignore\n        currentLyric.current = new Lyric(lyric, handleLyric);\n        currentLyric.current.play();\n        currentLineNum.current = 0;\n        currentLyric.current.seek(0);\n      })\n      .catch(() => {\n        songReady.current = true;\n        audioRef.current.play();\n      });\n  };\n  // 更改进度条\n  const onProgressChange = (curPercent: number) => {\n    const newTime = curPercent * duration;\n    setCurrentTime(newTime);\n    audioRef.current.currentTime = newTime;\n    if (!playing) {\n      togglePlayingDispatch(true);\n    }\n    if (currentLyric.current) {\n      currentLyric.current.seek(newTime * 1000);\n    }\n  };\n\n  const clickPlaying = (e: any, state: any) => {\n    e.stopPropagation();\n    togglePlayingDispatch(state);\n    if (currentLyric.current) {\n      currentLyric.current.togglePlay(currentTime * 1000);\n    }\n\n  };\n\n\n  useEffect(() => {\n    console.log('playing::', playing);\n    playing ? audioRef.current.play() : audioRef.current.pause();\n  }, [playing]);\n\n  // 进度条更新时间\n  const updateTime = (e: any) => {\n    setCurrentTime(e.target.currentTime);\n  };\n\n  // 歌曲切换逻辑\n  const handleLoop = () => {\n    audioRef.current.currentTime = 0;\n    togglePlayingDispatch(true);\n    audioRef.current.play();\n  };\n  const handlePrev = () => {\n    //播放列表只有一首歌时单曲循环\n    if (playList.length === 1) {\n      handleLoop();\n      return;\n    }\n    let index = currentIndex - 1;\n    if (index < 0) index = playList.length - 1;\n    if (!playing) togglePlayingDispatch(true);\n    changeCurrentIndexDispatch(index);\n  };\n  const handleNext = () => {\n    //播放列表只有一首歌时单曲循环\n    if (playList.length === 1) {\n      handleLoop();\n      return;\n    }\n    let index = currentIndex + 1;\n    if (index === playList.length) index = 0;\n    if (!playing) togglePlayingDispatch(true);\n    changeCurrentIndexDispatch(index);\n  };\n  // 播放模式\n  const changeMode = () => {\n    let newMode = (mode + 1) % 3;\n    if (newMode === 0) {\n      //顺序模式\n      changePlayListDispatch(sequencePlayList);\n      let index = findIndex(currentSong, sequencePlayList);\n      changeCurrentIndexDispatch(index);\n      setModeText('顺序循环');\n\n    } else if (newMode === 1) {\n      //单曲循环\n      changePlayListDispatch(sequencePlayList);\n      setModeText('单曲循环');\n\n    } else if (newMode === 2) {\n      //随机播放\n      let newList = shuffle(sequencePlayList);\n      let index = findIndex(currentSong, newList);\n      changePlayListDispatch(newList);\n      changeCurrentIndexDispatch(index);\n      setModeText('随机播放');\n\n    }\n    changeModeDispatch(newMode);\n    toastRef.current.show();\n  };\n\n  const handleEnd = () => {\n    if (mode === playMode.loop) {\n      handleLoop();\n    } else {\n      handleNext();\n    }\n  };\n\n  const handleError = () => {\n    songReady.current = true;\n    alert('播放出错');\n  };\n  return (\n    <div>\n      {isEmptyObject(currentSong) ? null :\n        <MiniPlayer\n          song={currentSong}\n          fullScreen={fullScreen}\n          playing={playing}\n          toggleFullScreen={toggleFullScreenDispatch}\n          clickPlaying={clickPlaying}\n          percent={percent}//进度\n          changePlayListDispatch={changePlayListDispatch}\n          togglePlayList={togglePlayListDispatch}\n        />\n      }\n      {isEmptyObject(currentSong) ? null :\n        <NormalPlayer\n          song={currentSong}\n          fullScreen={fullScreen}\n          playing={playing}\n          onProgressChange={onProgressChange}\n          toggleFullScreen={toggleFullScreenDispatch}\n          clickPlaying={clickPlaying}\n          duration={duration}//总时长\n          currentTime={currentTime}//播放时间\n          percent={percent}//进度\n          handlePrev={handlePrev}\n          handleNext={handleNext}\n          mode={mode}\n          changeMode={changeMode}\n          changePlayListDispatch={changePlayListDispatch}\n          togglePlayList={togglePlayListDispatch}\n          currentLyric={currentLyric.current}\n          currentPlayingLyric={currentPlayingLyric}\n          currentLineNum={currentLineNum.current}\n        />\n      }\n      <audio ref={audioRef} onEnded={handleEnd} onTimeUpdate={updateTime} onError={handleError}/>\n      <PlayList/>\n      <Toast text={modeText} ref={toastRef}/>\n    </div>\n  );\n}\n\n// 映射 Redux 全局的 state 到组件的 props 上\nconst mapStateToProps = (state: any) => ({\n  fullScreen: state.getIn(['player', 'fullScreen']),\n  playing: state.getIn(['player', 'playing']),\n  currentSong: state.getIn(['player', 'currentSong']),\n  showPlayList: state.getIn(['player', 'showPlayList']),\n  mode: state.getIn(['player', 'mode']),\n  currentIndex: state.getIn(['player', 'currentIndex']),\n  playList: state.getIn(['player', 'playList']),\n  sequencePlayList: state.getIn(['player', 'sequencePlayList'])\n});\n\n// 映射 dispatch 到 props 上\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    togglePlayingDispatch(data: any) {\n      dispatch(changePlayingState(data));\n    },\n    toggleFullScreenDispatch(data: any) {\n      dispatch(changeFullScreen(data));\n    },\n    togglePlayListDispatch(data: any) {\n      dispatch(changeShowPlayList(data));\n    },\n    changeCurrentIndexDispatch(index: any) {\n      dispatch(changeCurrentIndex(index));\n    },\n    changeCurrentDispatch(data: any) {\n      dispatch(changeCurrentSong(data));\n    },\n    changeModeDispatch(data: any) {\n      dispatch(changePlayMode(data));\n    },\n    changePlayListDispatch(data: any) {\n      dispatch(changePlayList(data));\n    }\n  };\n};\n\n// 将 ui 组件包装成容器组件\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(React.memo(Player));","import React from 'react';\r\nimport {renderRoutes} from 'react-router-config';\r\nimport {Top, Tab, TabItem} from './style';\r\nimport {NavLink} from 'react-router-dom';\r\nimport Player from '../Player'; // 利用 NavLink 组件进行路由跳转\r\n\r\nfunction Home(props: any) {\r\n  const {route} = props;\r\n\r\n  return (\r\n    <div>\r\n      <Top>\r\n        <span className=\"iconfont menu\">&#xe65c;</span>\r\n        <span className=\"title\">WebApp</span>\r\n        <span className=\"iconfont search\" onClick={() => props.history.push('/search')}>&#xe62b;</span>\r\n      </Top>\r\n      <Tab>\r\n        <NavLink to=\"/recommend\" activeClassName=\"selected\">\r\n          <TabItem>\r\n            <span> 推荐 </span>\r\n          </TabItem>\r\n        </NavLink>\r\n        <NavLink to=\"/singers\" activeClassName=\"selected\">\r\n          <TabItem>\r\n            <span> 歌手 </span>\r\n          </TabItem>\r\n        </NavLink>\r\n        <NavLink to=\"/rank\" activeClassName=\"selected\">\r\n          <TabItem>\r\n            <span> 排行榜 </span>\r\n          </TabItem>\r\n        </NavLink>\r\n      </Tab>\r\n      {renderRoutes(route.routes)}\r\n      <Player/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(Home);\r\n","import React, {lazy, Suspense} from 'react'\nimport {Redirect} from 'react-router-dom'\nimport Home from '../application/Home'\n\nconst RecommendComponent = lazy(() => import ('../application/Recommend/'))\nconst SingersComponent = lazy(() => import ('../application/Singers/'))\nconst RankComponent = lazy(() => import ('../application/Rank/'))\nconst AlbumComponent = lazy(() => import ('../application/Album/'))\nconst SingerComponent = lazy(() => import ('./../application/Singer/'))\nconst SearchComponent = lazy(() => import ('./../application/Search/'))\n\nconst SuspenseComponent = Component => props => {\n  return (\n    <Suspense fallback={null}>\n      <Component {...props}/>\n    </Suspense>\n  )\n}\n\nconst routes = [\n  {\n    path: '/',\n    component: Home,\n    routes: [\n      {\n        path: '/',\n        exact: true,\n        render: () => {\n          return <Redirect to={'/recommend'}/>\n        },\n      },\n      {\n        path: '/recommend',\n        component: SuspenseComponent(RecommendComponent),\n        routes: [\n          {\n            path: '/recommend/:id',\n            component: SuspenseComponent(AlbumComponent),\n          },\n        ],\n      },\n      {\n        path: '/singers',\n        component: SuspenseComponent(SingersComponent),\n        key: 'singers',\n        routes: [\n          {\n            path: '/singers/:id',\n            component: SuspenseComponent(SingerComponent),\n          },\n        ],\n      },\n      {\n        path: '/rank',\n        component: SuspenseComponent(RankComponent),\n        key: 'rank',\n        routes: [\n          {\n            path: '/rank/:id',\n            component: SuspenseComponent(AlbumComponent),\n          },\n        ],\n      },\n      {\n        path: '/search',\n        exact: true,\n        key: 'search',\n        component: SuspenseComponent(SearchComponent)\n      }\n    ],\n  },\n]\n\nexport default routes\n","import * as actionTypes from './constants'\r\nimport {fromJS} from 'immutable'// 这里用到 fromJS 把 JS 数据结构转化成 immutable 数据结构\r\n\r\nconst defaultState = fromJS({\r\n  enterLoading: true, // loading 效果\r\n  bannerList: [],\r\n  recommendList: [],\r\n})\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.CHANGE_BANNER:\r\n      return state.set('bannerList', action.data)\r\n    case actionTypes.CHANGE_RECOMMEND_LIST:\r\n      return state.set('recommendList', action.data)\r\n    case actionTypes.CHANGE_ENTER_LOADING:\r\n      return state.set('enterLoading', action.data)\r\n    default:\r\n      return state\r\n  }\r\n}","//reducer.js\r\nimport {fromJS} from 'immutable'\r\nimport * as actionTypes from './constants'\r\n\r\nconst defaultState = fromJS({\r\n  singerList: [],\r\n  enterLoading: true,     //控制进场Loading\r\n  pullUpLoading: false,   //控制上拉加载动画\r\n  pullDownLoading: false, //控制下拉加载动画\r\n  pageCount: 0            //这里是当前页数，我们即将实现分页功能\r\n})\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.CHANGE_SINGER_LIST:\r\n      return state.set('singerList', action.data)\r\n    case actionTypes.CHANGE_PAGE_COUNT:\r\n      return state.set('pageCount', action.data)\r\n    case actionTypes.CHANGE_ENTER_LOADING:\r\n      return state.set('enterLoading', action.data)\r\n    case actionTypes.CHANGE_PULLUP_LOADING:\r\n      return state.set('pullUpLoading', action.data)\r\n    case actionTypes.CHANGE_PULLDOWN_LOADING:\r\n      return state.set('pullDownLoading', action.data)\r\n    default:\r\n      return state\r\n  }\r\n}","//reducer.js\r\nimport * as actionTypes from './constants'\r\nimport {fromJS} from 'immutable'\r\n\r\nconst defaultState = fromJS({\r\n  currentAlbum: {},\r\n  enterLoading: false,\r\n})\r\n\r\n//reducer.js\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.CHANGE_CURRENT_ALBUM:\r\n      return state.set('currentAlbum', action.data)\r\n    case actionTypes.CHANGE_ENTER_LOADING:\r\n      return state.set('enterLoading', action.data)\r\n    default:\r\n      return state\r\n  }\r\n};","//store/reducer.js\r\nimport * as actionTypes from './constants'\r\nimport {fromJS} from 'immutable'\r\n\r\nconst defaultState = fromJS({\r\n  artist: {},\r\n  songsOfArtist: [],\r\n  loading: true\r\n})\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.CHANGE_ARTIST:\r\n      return state.set('artist', action.data)\r\n    case actionTypes.CHANGE_SONGS_OF_ARTIST:\r\n      return state.set('songsOfArtist', action.data)\r\n    case actionTypes.CHANGE_ENTER_LOADING:\r\n      return state.set('loading', action.data)\r\n    default:\r\n      return state\r\n  }\r\n}","//store/reducer.js\r\nimport * as actionTypes from './constants'\r\nimport {fromJS} from 'immutable'\r\nimport {playMode} from '../../../api/config'\r\nimport {findIndex} from '../../../api/utils'\r\n\r\n\r\nconst handleDeleteSong = (state, song) => {\r\n  //也可用loadsh库的deepClone方法。这里深拷贝是基于纯函数的考虑，不对参数state做修改\r\n  const playList = JSON.parse(JSON.stringify(state.get('playList').toJS()))\r\n  const sequenceList = JSON.parse(JSON.stringify(state.get('sequencePlayList').toJS()))\r\n  let currentIndex = state.get('currentIndex')\r\n  // 找对应歌曲在播放列表中的索引\r\n  const fpIndex = findIndex(song, playList)\r\n  // 在播放列表中将其删除\r\n  playList.splice(fpIndex, 1)\r\n  // 如果删除的歌曲排在当前播放歌曲前面，那么currentIndex--，让当前的歌正常播放\r\n  if (fpIndex < currentIndex) currentIndex--\r\n\r\n  //在sequenceList中直接删除歌曲即可\r\n  const fsIndex = findIndex(song, sequenceList)\r\n  sequenceList.splice(fsIndex, 1)\r\n\r\n  return state.merge({\r\n    'playList': fromJS(playList),\r\n    'sequencePlayList': fromJS(sequenceList),\r\n    'currentIndex': fromJS(currentIndex),\r\n  })\r\n}\r\n\r\nconst handleInsertSong = (state, song) => {\r\n  const playList = JSON.parse(JSON.stringify(state.get('playList').toJS()))\r\n  const sequenceList = JSON.parse(JSON.stringify(state.get('sequencePlayList').toJS()))\r\n  let currentIndex = state.get('currentIndex')\r\n  // 看看有没有同款\r\n  let fpIndex = findIndex(song, playList)\r\n  // 如果是当前歌曲直接不处理\r\n  if (fpIndex === currentIndex && currentIndex !== -1) return state\r\n  currentIndex++\r\n  // 把歌放进去，放到当前播放曲目的下一个位置\r\n  playList.splice(currentIndex, 0, song)\r\n  // 如果列表中已经存在要添加的歌，暂且称它 oldSong\r\n  if (fpIndex > -1) {\r\n    // 如果 oldSong 的索引在目前播放歌曲的索引小，那么删除它，同时当前 index 要减一\r\n    if (currentIndex > fpIndex) {\r\n      playList.splice(fpIndex, 1)\r\n      currentIndex--\r\n    } else {\r\n      // 否则直接删掉 oldSong\r\n      playList.splice(fpIndex + 1, 1)\r\n    }\r\n  }\r\n  // 同理，处理 sequenceList\r\n  let sequenceIndex = findIndex(playList[currentIndex], sequenceList) + 1\r\n  let fsIndex = findIndex(song, sequenceList)\r\n  // 插入歌曲\r\n  sequenceList.splice(sequenceIndex, 0, song)\r\n  if (fsIndex > -1) {\r\n    // 跟上面类似的逻辑。如果在前面就删掉，index--; 如果在后面就直接删除\r\n    if (sequenceIndex > fsIndex) {\r\n      sequenceList.splice(fsIndex, 1)\r\n      sequenceIndex--\r\n    } else {\r\n      sequenceList.splice(fsIndex + 1, 1)\r\n    }\r\n  }\r\n  return state.merge({\r\n    'playList': fromJS(playList),\r\n    'sequencePlayList': fromJS(sequenceList),\r\n    'currentIndex': fromJS(currentIndex),\r\n  })\r\n}\r\n\r\nconst defaultState = fromJS({\r\n  fullScreen: false,// 播放器是否为全屏模式\r\n  playing: false, // 当前歌曲是否播放\r\n  sequencePlayList: [], // 顺序列表 (因为之后会有随机模式，列表会乱序，因从拿这个保存顺序列表)\r\n  playList: [],\r\n  mode: playMode.sequence,// 播放模式\r\n  currentIndex: -1,// 当前歌曲在播放列表的索引位置\r\n  showPlayList: false,// 是否展示播放列表\r\n  currentSong: {}\r\n})\r\n\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.SET_CURRENT_SONG:\r\n      return state.set('currentSong', action.data)\r\n    case actionTypes.SET_FULL_SCREEN:\r\n      return state.set('fullScreen', action.data)\r\n    case actionTypes.SET_PLAYING_STATE:\r\n      return state.set('playing', action.data)\r\n    case actionTypes.SET_SEQUENCE_PLAYLIST:\r\n      return state.set('sequencePlayList', action.data)\r\n    case actionTypes.SET_PLAYLIST:\r\n      return state.set('playList', action.data)\r\n    case actionTypes.SET_PLAY_MODE:\r\n      return state.set('mode', action.data)\r\n    case actionTypes.SET_CURRENT_INDEX:\r\n      return state.set('currentIndex', action.data)\r\n    case actionTypes.SET_SHOW_PLAYLIST:\r\n      return state.set('showPlayList', action.data)\r\n    case actionTypes.DELETE_SONG:\r\n      return handleDeleteSong(state, action.data)\r\n    case actionTypes.INSERT_SONG:\r\n      return handleInsertSong(state, action.data)\r\n    default:\r\n      return state\r\n  }\r\n}","//reducer.js\r\nimport * as actionTypes from './constants'\r\nimport {fromJS} from 'immutable'\r\n\r\nconst defaultState = fromJS({\r\n  hotList: [], // 热门关键词列表\r\n  suggestList: [],// 列表，包括歌单和歌手\r\n  songsList: [],// 歌曲列表\r\n  enterLoading: false\r\n})\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.SET_HOT_KEYWRODS:\r\n      return state.set('hotList', action.data)\r\n    case actionTypes.SET_SUGGEST_LIST:\r\n      return state.set('suggestList', action.data)\r\n    case actionTypes.SET_RESULT_SONGS_LIST:\r\n      return state.set('songsList', action.data)\r\n    case actionTypes.SET_ENTER_LOADING:\r\n      return state.set('enterLoading', action.data)\r\n    default:\r\n      return state\r\n  }\r\n}","//reducer.js\r\nimport {combineReducers} from 'redux-immutable'\r\n\r\nimport {reducer as recommendReducer} from '../application/Recommend/store/index'\r\nimport {reducer as singersReducer} from '../application/Singers/store/index'\r\nimport {reducer as rankReducer} from '../application/Rank/store/index'\r\nimport {reducer as albumReducer} from '../application/Album/store/index'\r\nimport {reducer as singerInfoReducer} from '../application/Singer/store/index'\r\nimport {reducer as playerReducer} from '../application/Player/store/index'\r\nimport {reducer as searchReducer} from '../application/Search/store/index'\r\n\r\n\r\nexport default combineReducers({\r\n  recommend: recommendReducer,\r\n  singers: singersReducer,\r\n  rank: rankReducer,\r\n  album: albumReducer,\r\n  singerInfo: singerInfoReducer,\r\n  player: playerReducer,\r\n  search: searchReducer\r\n})","//index.js\r\nimport { createStore, compose, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport reducer from './reducer'\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore (reducer, composeEnhancers (\r\n  applyMiddleware (thunk)\r\n));\r\n\r\nexport default store;","import React, { useEffect, useRef } from \"react\";\r\nimport { GlobalStyle } from \"./style\";\r\nimport { IconStyle } from \"./assets/iconfont/iconfont\";\r\nimport routes from \"./routes\";\r\nimport { HashRouter } from \"react-router-dom\";\r\nimport { renderRoutes } from \"react-router-config\";\r\nimport store from \"./store/index\";\r\nimport { Provider } from \"react-redux\";\r\nimport { RouteConfig } from \"react-router-config\";\r\nimport Confirm from \"./baseUI/confirm/index\";\r\n\r\nconst route = routes as RouteConfig[];\r\n\r\nfunction App() {\r\n  const confirmRef = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    const width = document.body.clientWidth;\r\n    if (width > 600) {\r\n      confirmRef.current.show();\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Provider store={store}>\r\n      <HashRouter>\r\n        <GlobalStyle />\r\n        <IconStyle />\r\n        {renderRoutes(route)}\r\n\r\n        <Confirm\r\n          ref={confirmRef}\r\n          text={\"请打开调试页面模拟手机，再刷新预览\"}\r\n          cancelBtnText={\"取消\"}\r\n          confirmBtnText={\"确定\"}\r\n        />\r\n      </HashRouter>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","//constants.js\r\nexport const SET_HOT_KEYWRODS = 'search/SET_HOT_KEYWRODS'\r\nexport const SET_SUGGEST_LIST = 'search/SET_SUGGEST_LIST'\r\nexport const SET_RESULT_SONGS_LIST = 'search/SET_RESULT_SONGS_LIST'\r\nexport const SET_ENTER_LOADING = 'search/SET_ENTER_LOADING'","// 扩大可点击区域\r\nconst extendClick = () => {\r\n\treturn `\r\n    position: relative;\r\n    &:before {\r\n      content: '';\r\n      position: absolute;\r\n      top: -10px; bottom: -10px; left: -10px; right: -10px;\r\n    };\r\n  `\r\n}\r\n// 一行文字溢出部分用... 代替\r\nconst noWrap = () => {\r\n\treturn `\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n  `\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n\t\"theme-color\": \"#d44439\",\r\n\t\"theme-color-shadow\": \"rgba(212, 68, 57, .5)\",\r\n\t\"font-color-light\": \"#f1f1f1\",\r\n\t\"font-color-desc\": \"#2E3030\",\r\n\t\"font-color-desc-v2\": \"#bba8a8\", // 略淡\r\n\t\"font-size-ss\": \"10px\",\r\n\t\"font-size-s\": \"12px\",\r\n\t\"font-size-m\": \"14px\",\r\n\t\"font-size-l\": \"16px\",\r\n\t\"font-size-ll\": \"18px\",\r\n\t\"border-color\": \"#e4e4e4\",\r\n\t\"background-color\": \"#f2f3f4\",\r\n\t\"background-color-shadow\": \"rgba(0, 0, 0, 0.3)\",\r\n\t\"highlight-background-color\": \"#fff\",\r\n\textendClick,\r\n\tnoWrap,\r\n}\r\n","export const CHANGE_SINGER_LIST = 'singers/CHANGE_SINGER_LIST'\r\nexport const CHANGE_PAGE_COUNT = 'singers/PAGE_COUNT'\r\nexport const CHANGE_ENTER_LOADING = 'singers/ENTER_LOADING'\r\nexport const CHANGE_PULLUP_LOADING = 'singers/PULLUP_LOADING'\r\nexport const CHANGE_PULLDOWN_LOADING = 'singers/PULLDOWN_LOADING'","//constants.js\r\nexport const CHANGE_BANNER = 'recommend/CHANGE_BANNER'\r\nexport const CHANGE_ENTER_LOADING = 'recommend/CHANGE_ENTER_LOADING'\r\nexport const CHANGE_RECOMMEND_LIST = 'recommend/RECOMMEND_LIST'","//store/constants.js\r\nexport const CHANGE_ARTIST = 'singer/CHANGE_ARTIST'\r\nexport const CHANGE_SONGS_OF_ARTIST = 'singer/CHANGE_SONGS_OF_ARTIST'\r\nexport const CHANGE_ENTER_LOADING = 'singer/CHNAGE_ENTER_LOADING'","//constants.js\r\nexport const CHANGE_CURRENT_ALBUM = 'album/CHANGE_CURRENT_ALBUM'\r\nexport const CHANGE_ENTER_LOADING = 'album/CHANGE_ENTER_LOADING'","//baseUI/loading-v2/index.js\r\nimport React from 'react';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nconst dance = keyframes`\r\n  0%, 40%, 100% {\r\n    transform: scaleY (0.4);\r\n    transform-origin: center 100%;\r\n  }\r\n  20% {\r\n    transform: scaleY (1);\r\n  }\r\n`;\r\nconst Loading = styled.div`\r\n  height: 10px;\r\n  width: 100%;\r\n  margin: auto;\r\n  text-align: center;\r\n  font-size: 10px;\r\n\r\n  > div {\r\n    display: inline-block;\r\n    background-color: ${style ['theme-color']};\r\n    height: 100%;\r\n    width: 1px;\r\n    margin-right: 2px;\r\n    animation: ${dance} 1s infinite;\r\n  }\r\n\r\n  > div:nth-child (2) {\r\n    animation-delay: -0.4s;\r\n  }\r\n\r\n  > div:nth-child (3) {\r\n    animation-delay: -0.6s;\r\n  }\r\n\r\n  > div:nth-child (4) {\r\n    animation-delay: -0.5s;\r\n  }\r\n\r\n  > div:nth-child (5) {\r\n    animation-delay: -0.2s;\r\n  }\r\n\r\n`;\r\n\r\nfunction LoadingV2() {\r\n  return (\r\n    <Loading>\r\n      <div/>\r\n      <div/>\r\n      <div/>\r\n      <div/>\r\n      <div/>\r\n      <span> 拼命加载中...</span>\r\n    </Loading>\r\n  );\r\n}\r\n\r\nexport default React.memo(LoadingV2);","import React, {forwardRef, useState, useEffect, useRef, useImperativeHandle, useMemo} from 'react';\r\n\r\nimport BScroll from 'better-scroll';\r\nimport styled from 'styled-components';\r\nimport Loading from '../loading/index';\r\nimport LoadingV2 from '../loading-v2/index';\r\nimport {debounce} from '../../api/utils';\r\n\r\n\r\nconst ScrollContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst PullUpLoading = styled.div`\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 5px;\r\n  width: 60px;\r\n  height: 60px;\r\n  margin: auto;\r\n  z-index: 100;\r\n`;\r\n\r\nexport const PullDownLoading = styled.div`\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0px;\r\n  height: 30px;\r\n  margin: auto;\r\n  z-index: 100;\r\n`;\r\n\r\ninterface Props {\r\n  direction?: 'vertical' | 'horizontal',// 滚动的方向\r\n  click?: true,// 是否支持点击\r\n  refresh?: boolean,// 是否刷新\r\n  onScroll?: (v: any) => void,// 滑动触发的回调函数\r\n  pullUp?: () => void,// 上拉加载逻辑\r\n  pullDown?: () => void,// 下拉加载逻辑\r\n  pullUpLoading?: boolean,// 是否显示上拉 loading 动画\r\n  pullDownLoading?: boolean,// 是否显示下拉 loading 动画\r\n  bounceTop?: boolean,// 是否支持向上吸顶\r\n  bounceBottom?: boolean,// 是否支持向下吸底\r\n  children?: any\r\n}\r\n\r\n\r\nconst Scroll = forwardRef<any, Props>((props, ref) => {\r\n  const [bScroll, setBScroll] = useState<any>();\r\n  const scrollContainerRef = useRef<any>();\r\n\r\n  const {\r\n    direction = 'vertical',\r\n    click = true,\r\n    refresh = true,\r\n    onScroll = null,\r\n    pullUpLoading = false,\r\n    pullDownLoading = false,\r\n    pullUp = null,\r\n    pullDown = null,\r\n    bounceTop = true,\r\n    bounceBottom = true,\r\n  } = props;\r\n\r\n  let pullUpDebounce = useMemo(() => {\r\n    return debounce(pullUp, 300);\r\n  }, [pullUp]);\r\n// 千万注意，这里不能省略依赖，\r\n// 不然拿到的始终是第一次 pullUp 函数的引用，相应的闭包作用域变量都是第一次的，产生闭包陷阱。下同。\r\n\r\n  let pullDownDebounce = useMemo(() => {\r\n    return debounce(pullDown, 300);\r\n  }, [pullDown]);\r\n\r\n  useEffect(() => {\r\n    const scroll = new BScroll(scrollContainerRef.current, {\r\n      scrollX: direction === 'horizontal',\r\n      scrollY: direction === 'vertical',\r\n      probeType: 3,\r\n      click: click,\r\n      bounce: {\r\n        top: bounceTop,\r\n        bottom: bounceBottom\r\n      }\r\n    });\r\n    setBScroll(scroll);\r\n    return () => {\r\n      setBScroll(null);\r\n    };\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!bScroll || !onScroll) return;\r\n    bScroll.on('scroll', (scroll: any) => {\r\n      onScroll(scroll);\r\n    });\r\n    return () => {\r\n      bScroll.off('scroll');\r\n    };\r\n  }, [onScroll, bScroll]);\r\n\r\n  // 判断用户的上拉动作\r\n  useEffect(() => {\r\n    if (!bScroll || !pullUp) return;\r\n    const handlePullUp = () => {\r\n      //判断是否滑动到了底部\r\n      if (bScroll.y <= bScroll.maxScrollY + 100) {\r\n        pullUpDebounce();\r\n      }\r\n    };\r\n    bScroll.on('scrollEnd', handlePullUp);\r\n    // 解绑\r\n    return () => {\r\n      bScroll.off('scrollEnd', handlePullUp);\r\n    };\r\n\r\n  }, [pullUp, pullUpDebounce, bScroll]);\r\n\r\n  // 判断用户的下拉动作\r\n  useEffect(() => {\r\n    if (!bScroll || !pullDown) return;\r\n    const handlePullDown = (pos: any) => {\r\n      //判断用户的下拉动作\r\n      if (pos.y > 50) {\r\n        pullDownDebounce();\r\n      }\r\n    };\r\n    bScroll.on('touchEnd', handlePullDown);\r\n    return () => {\r\n      bScroll.off('touchEnd', handlePullDown);\r\n    };\r\n  }, [pullDown, pullUpDebounce, bScroll]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (refresh && bScroll) {\r\n      bScroll.refresh();\r\n    }\r\n  });\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    refresh() {\r\n      if (bScroll) {\r\n        bScroll.refresh();\r\n        bScroll.scrollTo(0, 0);\r\n      }\r\n    },\r\n    getBScroll() {\r\n      if (bScroll) {\r\n        return bScroll;\r\n      }\r\n    }\r\n  }));\r\n\r\n\r\n  const PullUpdisplayStyle = pullUpLoading ? {display: ''} : {display: 'none'};\r\n  const PullDowndisplayStyle = pullDownLoading ? {display: ''} : {display: 'none'};\r\n  return (\r\n    <ScrollContainer ref={scrollContainerRef}>\r\n      {props.children}\r\n      {/* 滑到底部加载动画 */}\r\n      <PullUpLoading style={PullUpdisplayStyle}><Loading/></PullUpLoading>\r\n      {/* 顶部下拉刷新动画 */}\r\n      <PullDownLoading style={PullDowndisplayStyle}><LoadingV2/></PullDownLoading>\r\n    </ScrollContainer>\r\n  );\r\n\r\n});\r\n\r\n\r\nexport default Scroll;","import React from 'react';\r\nimport styled, {keyframes} from 'styled-components';\r\nimport style from '../../assets/global-style';\r\n\r\nconst loading = keyframes`\r\n  0%, 100% {\r\n    transform: scale(0.0);\r\n  }\r\n  50% {\r\n    transform: scale(1.0);\r\n  }\r\n`;\r\nconst LoadingWrapper = styled.div`\r\n  > div {\r\n    position: absolute;\r\n    z-index: 1000;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    margin: auto;\r\n    width: 60px;\r\n    height: 60px;\r\n    opacity: 0.6;\r\n    border-radius: 50%;\r\n    background-color: ${style['theme-color']};\r\n    animation: ${loading} 1.4s infinite ease-in;\r\n  }\r\n\r\n  > div:nth-child (2) {\r\n    animation-delay: -0.7s;\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  show?: boolean;\r\n}\r\n\r\nconst Loading: React.FC<Props> = (props) => {\r\n  const {show = true} = props;\r\n\r\n  return (\r\n    <LoadingWrapper style={show ? {display: ''} : {display: 'none'}}>\r\n      <div></div>\r\n      <div></div>\r\n    </LoadingWrapper>\r\n  );\r\n};\r\n\r\nexport default React.memo(Loading);","//actionCreators.js\r\nimport * as actionTypes from './constants'\r\nimport {fromJS} from 'immutable'// 将 JS 对象转换成 immutable 对象\r\nimport {getBannerRequest, getRecommendListRequest} from '../../../api/request'\r\n\r\nexport const changeBannerList = (data) => ({\r\n  type: actionTypes.CHANGE_BANNER,\r\n  data: fromJS(data)\r\n})\r\n\r\nexport const changeRecommendList = (data) => ({\r\n  type: actionTypes.CHANGE_RECOMMEND_LIST,\r\n  data: fromJS(data)\r\n})\r\n\r\nexport const changeEnterLoading = (data) => ({\r\n  type: actionTypes.CHANGE_ENTER_LOADING,\r\n  data\r\n})\r\n\r\nexport const getBannerList = () => {\r\n  return (dispatch) => {\r\n    getBannerRequest().then(data => {\r\n      dispatch(changeBannerList(data.banners))\r\n    }).catch(() => {\r\n      console.log('轮播图数据传输错误')\r\n    })\r\n  }\r\n}\r\n\r\nexport const getRecommendList = () => {\r\n  return (dispatch) => {\r\n    getRecommendListRequest().then(data => {\r\n      dispatch(changeRecommendList(data.result))\r\n      dispatch(changeEnterLoading(false))// 改变 loading\r\n    }).catch(() => {\r\n      console.log('推荐歌单数据传输错误')\r\n    })\r\n  }\r\n}\r\n","import {\r\n  getHotSingerListRequest,\r\n  getSingerListRequest\r\n} from '../../../api/request'\r\nimport {\r\n  CHANGE_SINGER_LIST,\r\n  CHANGE_CATOGORY,\r\n  CHANGE_ALPHA,\r\n  CHANGE_PAGE_COUNT,\r\n  CHANGE_PULLUP_LOADING,\r\n  CHANGE_PULLDOWN_LOADING,\r\n  CHANGE_ENTER_LOADING\r\n} from './constants'\r\nimport {fromJS} from 'immutable'\r\n\r\n\r\nconst changeSingerList = (data) => ({\r\n  type: CHANGE_SINGER_LIST,\r\n  data: fromJS(data)\r\n})\r\n\r\nexport const changePageCount = (data) => ({\r\n  type: CHANGE_PAGE_COUNT,\r\n  data\r\n})\r\n\r\n//进场loading\r\nexport const changeEnterLoading = (data) => ({\r\n  type: CHANGE_ENTER_LOADING,\r\n  data\r\n})\r\n\r\n//滑动最底部loading\r\nexport const changePullUpLoading = (data) => ({\r\n  type: CHANGE_PULLUP_LOADING,\r\n  data\r\n})\r\n\r\n//顶部下拉刷新loading\r\nexport const changePullDownLoading = (data) => ({\r\n  type: CHANGE_PULLDOWN_LOADING,\r\n  data\r\n})\r\n\r\n//第一次加载热门歌手\r\nexport const getHotSingerList = () => {\r\n  return (dispatch) => {\r\n    getHotSingerListRequest(0).then(res => {\r\n      const data = res.artists\r\n      dispatch(changeSingerList(data))\r\n      dispatch(changeEnterLoading(false))\r\n      dispatch(changePullDownLoading(false))\r\n    }).catch(() => {\r\n      console.log('热门歌手数据获取失败')\r\n    })\r\n  }\r\n}\r\n\r\n//加载更多热门歌手\r\nexport const refreshMoreHotSingerList = () => {\r\n  return (dispatch, getState) => {\r\n    const pageCount = getState().getIn(['singers', 'pageCount'])\r\n    const singerList = getState().getIn(['singers', 'singerList']).toJS()\r\n    getHotSingerListRequest(pageCount).then(res => {\r\n      const data = [...singerList, ...res.artists]\r\n      dispatch(changeSingerList(data))\r\n      dispatch(changePullUpLoading(false))\r\n    }).catch(() => {\r\n      console.log('热门歌手数据获取失败')\r\n    })\r\n  }\r\n}\r\n\r\n//第一次加载对应类别的歌手\r\nexport const getSingerList = (category, alpha) => {\r\n  return (dispatch, getState) => {\r\n    getSingerListRequest(category, alpha, 0).then(res => {\r\n      const data = res.artists\r\n      dispatch(changeSingerList(data))\r\n      dispatch(changeEnterLoading(false))\r\n      dispatch(changePullDownLoading(false))\r\n    }).catch(() => {\r\n      console.log('歌手数据获取失败')\r\n    })\r\n  }\r\n}\r\n\r\n//加载更多歌手\r\nexport const refreshMoreSingerList = (category, alpha) => {\r\n  return (dispatch, getState) => {\r\n    const pageCount = getState().getIn(['singers', 'pageCount'])\r\n    const singerList = getState().getIn(['singers', 'singerList']).toJS()\r\n    getSingerListRequest(category, alpha, pageCount).then(res => {\r\n      const data = [...singerList, ...res.artists]\r\n      dispatch(changeSingerList(data))\r\n      dispatch(changePullUpLoading(false))\r\n    }).catch(() => {\r\n      console.log('歌手数据获取失败')\r\n    })\r\n  }\r\n}","//actionCreators.js\r\nimport {CHANGE_CURRENT_ALBUM, CHANGE_ENTER_LOADING} from './constants'\r\nimport {getAlbumDetailRequest} from '../../../api/request'\r\nimport {fromJS} from 'immutable'\r\n\r\nconst changeCurrentAlbum = (data) => ({\r\n  type: CHANGE_CURRENT_ALBUM,\r\n  data: fromJS(data)\r\n})\r\n\r\nexport const changeEnterLoading = (data) => ({\r\n  type: CHANGE_ENTER_LOADING,\r\n  data\r\n})\r\n\r\nexport const getAlbumList = (id) => {\r\n  return dispatch => {\r\n    getAlbumDetailRequest(id).then(res => {\r\n      let data = res.playlist\r\n      dispatch(changeCurrentAlbum(data))\r\n      dispatch(changeEnterLoading(false))\r\n    }).catch(() => {\r\n      console.log('获取 album 数据失败！')\r\n    })\r\n  }\r\n}","import {CHANGE_SONGS_OF_ARTIST, CHANGE_ARTIST, CHANGE_ENTER_LOADING} from './constants'\r\nimport {fromJS} from 'immutable'\r\nimport {getSingerInfoRequest} from './../../../api/request'\r\n\r\nconst changeArtist = (data) => ({\r\n  type: CHANGE_ARTIST,\r\n  data: fromJS(data)\r\n})\r\n\r\nconst changeSongs = (data) => ({\r\n  type: CHANGE_SONGS_OF_ARTIST,\r\n  data: fromJS(data)\r\n})\r\nexport const changeEnterLoading = (data) => ({\r\n  type: CHANGE_ENTER_LOADING,\r\n  data\r\n})\r\n\r\nexport const getSingerInfo = (id) => {\r\n  return dispatch => {\r\n    getSingerInfoRequest(id).then(data => {\r\n      dispatch(changeArtist(data.artist))\r\n      dispatch(changeSongs(data.hotSongs))\r\n      dispatch(changeEnterLoading(false))\r\n    })\r\n  }\r\n}","import {SET_HOT_KEYWRODS, SET_SUGGEST_LIST, SET_RESULT_SONGS_LIST, SET_ENTER_LOADING} from './constants'\r\nimport {fromJS} from 'immutable'\r\nimport {getHotKeyWordsRequest, getSuggestListRequest, getResultSongsListRequest} from './../../../api/request'\r\n\r\nconst changeHotKeyWords = (data) => ({\r\n  type: SET_HOT_KEYWRODS,\r\n  data: fromJS(data)\r\n})\r\n\r\nconst changeSuggestList = (data) => ({\r\n  type: SET_SUGGEST_LIST,\r\n  data: fromJS(data)\r\n})\r\n\r\nconst changeResultSongs = (data) => ({\r\n  type: SET_RESULT_SONGS_LIST,\r\n  data: fromJS(data)\r\n})\r\n\r\nexport const changeEnterLoading = (data) => ({\r\n  type: SET_ENTER_LOADING,\r\n  data\r\n})\r\n\r\nexport const getHotKeyWords = () => {\r\n  return dispatch => {\r\n    getHotKeyWordsRequest().then(data => {\r\n      // 拿到关键词列表\r\n      let list = data.result.hots\r\n      dispatch(changeHotKeyWords(list))\r\n    })\r\n  }\r\n}\r\nexport const getSuggestList = (query) => {\r\n  return dispatch => {\r\n    getSuggestListRequest(query).then(data => {\r\n      if (!data) return\r\n      let res = data.result || []\r\n      dispatch(changeSuggestList(res))\r\n    })\r\n    getResultSongsListRequest(query).then(data => {\r\n      if (!data) return\r\n      let res = data.result.songs || []\r\n      dispatch(changeResultSongs(res))\r\n      dispatch(changeEnterLoading(false))// 关闭 loading\r\n    })\r\n  }\r\n}","export const getCount = (count) => {\r\n  if (count < 0) return\r\n  if (count < 10000) {\r\n    return count\r\n  } else if (Math.floor(count / 10000) < 10000) {\r\n    return Math.floor(count / 1000) / 10 + '万'\r\n  } else {\r\n    return Math.floor(count / 10000000) / 10 + '亿'\r\n  }\r\n}\r\n\r\n// 防抖函数\r\nexport const debounce = (func, delay) => {\r\n  let timer\r\n  return function (...args) {\r\n    if (timer) {\r\n      clearTimeout(timer)\r\n    }\r\n    timer = setTimeout(() => {\r\n      func.apply(this, args)\r\n      clearTimeout(timer)\r\n    }, delay)\r\n  }\r\n}\r\n\r\n// 处理数据，找出第一个没有歌名的排行榜的索引\r\nexport const filterIndex = rankList => {\r\n  if (rankList.length) {\r\n    for (let i = 0; i < rankList.length - 1; i++) {\r\n      if (rankList[i].tracks.length && !rankList[i + 1].tracks.length) {\r\n        return i + 1\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 处理歌手列表拼接歌手名字\r\nexport const getName = list => {\r\n  let str = ''\r\n  list.map((item, index) => {\r\n    str += index === 0 ? item.name : '/' + item.name\r\n    return item\r\n  })\r\n  return str\r\n}\r\n//判断一个对象是否为空\r\nexport const isEmptyObject = obj => !obj || Object.keys(obj).length === 0\r\n\r\n// 给 css3 相关属性增加浏览器前缀，处理浏览器兼容性问题\r\nlet elementStyle = document.createElement('div').style\r\n\r\nlet vendor = (() => {\r\n  // 首先通过 transition 属性判断是何种浏览器\r\n  let transformNames = {\r\n    webkit: 'webkitTransform',\r\n    Moz: 'MozTransform',\r\n    O: 'OTransfrom',\r\n    ms: 'msTransform',\r\n    standard: 'Transform'\r\n  }\r\n  for (let key in transformNames) {\r\n    if (elementStyle[transformNames[key]] !== undefined) {\r\n      return key\r\n    }\r\n  }\r\n  return false\r\n})()\r\n\r\nexport function prefixStyle(style) {\r\n  if (vendor === false) {\r\n    return false\r\n  }\r\n  if (vendor === 'standard') {\r\n    return style\r\n  }\r\n  return vendor + style.charAt(0).toUpperCase() + style.substr(1)\r\n}\r\n\r\n//转换歌曲播放时间\r\nexport const formatPlayTime = interval => {\r\n  interval = interval | 0// |0表示向下取整\r\n  const minute = (interval / 60) | 0\r\n  const second = (interval % 60).toString().padStart(2, '0')\r\n  return `${minute}:${second}`\r\n}\r\n\r\nfunction getRandomInt(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1) + min)\r\n}\r\n\r\n// 随机算法\r\nexport function shuffle(arr) {\r\n  let new_arr = []\r\n  arr.forEach(item => {\r\n    new_arr.push(item)\r\n  })\r\n  for (let i = 0; i < new_arr.length; i++) {\r\n    let j = getRandomInt(0, i)\r\n    let t = new_arr[i]\r\n    new_arr[i] = new_arr[j]\r\n    new_arr[j] = t\r\n  }\r\n  return new_arr\r\n}\r\n\r\n// 找到当前的歌曲索引\r\nexport const findIndex = (song, list) => {\r\n  return list.findIndex(item => {\r\n    return song.id === item.id\r\n  })\r\n}\r\n//拼接出歌曲的url链接\r\nexport const getSongUrl = id => {\r\n  return `https://music.163.com/song/media/outer/url?id=${id}.mp3`\r\n}\r\n\r\n//除去手机号码的空格符号\r\nexport const trimPhone = val => val.replace(/(^\\s+)|(\\s+$)|\\s+/g, '')\r\n\r\n","import {fromJS} from 'immutable'\r\nimport {getRankListRequest} from '../../../api/request'\r\n\r\n//constants\r\nexport const CHANGE_RANK_LIST = 'home/rank/CHANGE_RANK_LIST'\r\nexport const CHANGE_LOADING = 'home/rank/CHANGE_LOADING'\r\n\r\n//actionCreator\r\nconst changeRankList = (data) => ({\r\n  type: CHANGE_RANK_LIST,\r\n  data: fromJS(data)\r\n})\r\n\r\nexport const getRankList = () => {\r\n  return dispatch => {\r\n    getRankListRequest().then(data => {\r\n      let list = data && data.list\r\n      dispatch(changeRankList(list))\r\n      dispatch(changeLoading(false))\r\n    })\r\n  }\r\n}\r\n\r\nconst changeLoading = (data) => ({\r\n  type: CHANGE_LOADING,\r\n  data\r\n})\r\n\r\n//reducer\r\nconst defaultState = fromJS({\r\n  rankList: [],\r\n  loading: true\r\n})\r\n\r\nconst reducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case CHANGE_RANK_LIST:\r\n      return state.set('rankList', action.data)\r\n    case CHANGE_LOADING:\r\n      return state.set('loading', action.data)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport {reducer}\r\n","import {axiosInstance, categoryMap} from './config'\r\n\r\nexport const getBannerRequest = () => {\r\n  return axiosInstance.get('/banner')\r\n}\r\n\r\nexport const getRecommendListRequest = () => {\r\n  return axiosInstance.get('/personalized')\r\n}\r\n\r\nexport const getHotSingerListRequest = (count) => {\r\n  return axiosInstance.get(`/top/artists?offset=${count}`)\r\n}\r\n\r\nexport const getSingerListRequest = (category, alpha, count) => {\r\n  const {type, area} = !!category ? categoryMap.get(category) : {}\r\n  return axiosInstance.get(`/artist/list?${type && area ? `type=${type}&area=${area}` : ''}&initial=${alpha.toLowerCase()}&offset=${count}`)\r\n}\r\n\r\nexport const getRankListRequest = () => {\r\n  return axiosInstance.get(`/toplist/detail`)\r\n}\r\n\r\nexport const getAlbumDetailRequest = id => {\r\n  return axiosInstance.get(`/playlist/detail?id=${id}`)\r\n}\r\n\r\nexport const getSingerInfoRequest = id => {\r\n  return axiosInstance.get(`/artists?id=${id}`)\r\n}\r\n//拼接出歌曲的url链接\r\nexport const getSongUrl = id => {\r\n  return `https://music.163.com/song/media/outer/url?id=${id}.mp3`\r\n}\r\n\r\nexport const getLyricRequest = id => {\r\n  return axiosInstance.get(`/lyric?id=${id}`)\r\n}\r\n\r\nexport const getHotKeyWordsRequest = () => {\r\n  return axiosInstance.get(`/search/hot`)\r\n}\r\n\r\nexport const getSuggestListRequest = query => {\r\n  return axiosInstance.get(`/search/suggest?keywords=${query}`)\r\n}\r\n\r\nexport const getResultSongsListRequest = query => {\r\n  return axiosInstance.get(`/search?keywords=${query}`)\r\n}\r\n\r\nexport const getSongDetailRequest = id => {\r\n  return axiosInstance.get(`/song/detail?ids=${id}`)\r\n}"],"sourceRoot":""}